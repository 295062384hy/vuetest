@extends( "master/main" ) @section('css')
<style>
    body,html{
        height: 100%;
        width: 100%;
        background-color: white;

    }
    .main_body {
        margin: 30px 2%;
        border: solid 1px #d6dcde;
        background-color: white;

    }

    .title_p {
        font-size: 18px;
        padding: 30px 20px;
        margin-bottom: 20px;
        border-bottom: solid 1px #d6dcde;
    }

    .demo-form-inline {
        padding-left: 20px;
        margin-top: 20px;
    }

    .el-breadcrumb__item {
        transform: skewX(-45deg);
        padding: 0px 26px;
        border-right: 1px solid #2f94db;
    }

    .el-breadcrumb__item:nth-child(2) {
        background: #90c02b;
    }

    .el-breadcrumb__item>.el-breadcrumb__inner {
        transform: skewX(45deg);
        display: inline-block
    }

    .el-breadcrumb__item>.el-breadcrumb__inner {
        color: #ffffff;
    }

    .el-table--border th,
    .el-table__fixed-right-patch {
        background-color: #fafafa;
        text-align: center
    }

    .el-table--enable-row-transition .el-table__body td {
        text-align: center
    }

    .el-form--inline a:-webkit-any-link {
        color: #ffffff;
        cursor: pointer;
        text-decoration: none;
    }

    .one_body {
        /*border-top: solid 1px #d6dcde;*/
        padding: 15px;
        overflow: hidden;
    }

    .one_bt {
        float: right;
    }

    .one_date {
        float: left;
    }

    .border_r {
        border-radius: 10px;
        background-color: #67c23a;
        display: inline-block;
        width: 20px;
        height: 20px;
        line-height: 20px;
        border: 1px solid #56e63c;
    }

    .text_r {
        text-align: right;
    }

    .hotel_css {
        background-color: #C7DDF3;
        font-size: 16px;
        color: black;
        font-weight: normal;
        font-stretch: normal;
        letter-spacing: 0px;
        text-align: center;
        padding: 20px;
        height: 30px;
    }

    .f_r {
        float: right;
    }

    .danger_css {
        color: #e65555
    }

    .warning_css {
        border: 1px solid #e6a23c;
    }

    .bt_css {
        width: 100%;
        margin: 10px 0px;
    }

    .dialogSearch_bar {
        margin: 20px 0px;
        overflow: hidden;
    }

    .color_red {
        color: red;

    }

    .p_t_b_10 {
        padding: 10px 0px;
    }

    .font_20 {
        font-size: 20px;
    }

    .warning_border .el-input__inner {
        border-color: #e6a23c;
    }


    .el-breadcrumb__inner a {
        color: #ffffff;
    }
    .footerhtm{
        margin-top: 20px;
        text-align: center;
    }
    .el-table{
        font-size: 16px;
        color: black;
    }
    .main_border{
        /*border-bottom: 1px solid rgba(199,221,243,1);*/
        overflow: hidden;
        font-size: 16px;
    }
    .inputmd{
        width: 360px;
        margin-bottom: 10px;
        display: inline-block;
    }
    .inputm{
        width: 370px;
        margin-bottom: 10px;
    }

    .tac{
        text-align: center;
        margin-top: 15px;
    }
    .hometable .cell{
        line-height: 35px;
        font-size: 12px;
    }
    .mart15{
        margin-top: 15px;
        margin-bottom: 10px;
    }
    .spantop{
        display: inline-block;
        margin-top: 8px;
    }
    .el-radio__label{
        font-size: 16px;
        color: black;
    }
    .newPriceList td{
        width: 170px;
        line-height: 40px;
        text-align: center;
        border:1px solid #ebeef5
    }
    .disnone{
        display: none;
    }
    .hometable .el-form-item{
        margin-bottom: 0px;
    }
    .meeting_child{
        display: inline-block;
    }

    .ShareUserListData{
        overflow: hidden;
        margin: 10px auto;
    }
    #display{
        opacity:0;
        filter:alpha(opacity=0);
        position: relative;
        z-index: -1;
    }
    #display .discaozuo{
        display: none;
    }
    .bg-td {
        background-color: #f1f4f9;
    }
    .newPriceList table {
        width: 100%;
        border-spacing: 0;
        border-collapse: collapse;
        border: none;
    }

    .newPriceList td {
        font-size: 14px;
        padding-left: 10px;
    }
    .el-textarea__inner{
        padding: 0;
    }
    .txtarea{min-height: 40px; border: 1px solid #dcdfe6;border-radius: 10px;padding: 2px; text-align: left; line-height: 20px;}
    .warning_border  {
        border-color: #e6a23c;
    }

</style>
@endsection @section( "content" )
<div id="main" v-loading.fullscreen.lock="fullscreenLoading">
    <ht-menu></ht-menu>
    <!-- 我的会议列表开始 -->
    <div class="main_body">
        <!-- 切换分类 -->
        <div class="main_border">

            <el-col :span="24" class="info-title">
                <div class="meeting_child">{{trans('meeting.a10273')}}</div>

                <div class="f_r" style="margin-bottom: 10px;margin-right: 10px">
                    <el-button   size="mini"  type="primary" v-if="invoice_bt" @click="dialogVisible_insertTaxNum=true" :disabled="role_id==11">{{trans('meeting.a10285')}}</el-button>
                    {{--<el-button  size="small" type="primary" @click="upload_FN()">{{trans('meeting.sczcwj')}}</el-button>--}}
                    <el-button  size="mini" type="primary" @click="print_qr()" :disabled="role_id==11">打印PDF</el-button>

                    <div style="display: inline-block" v-if="airList.length==0&&sumradio==3&&role_id!=11">
                        <el-upload
                                class="upload-demo dis"
                                action="/logisticsticket/uploadAirSummarize"
                                :on-success="file_success"
                                :on-error="file_error"
                                :before-upload="beforeupload"
                                accept=".excel,.xlsx,xls"
                                :data="airpppss"
                                :show-file-list="false"
                                :file-list="airfileList">
                            <el-button  size="mini" type="primary"  >上传结算单</el-button>
                        </el-upload>
                    </div>

                    <el-button  size="mini" type="primary" @click="totalConfirm()" v-if="total_bt" :disabled="role_id==11">{{trans('meeting.qrzfybtj')}}</el-button>
                    <el-button    size="mini" type="primary" @click="sendToEoConfirm()" v-if="send_bt" :disabled="send_bt_flg" :disabled="role_id==11">{{trans('meeting.fseoqr')}}</el-button>
                </div>
            </el-col>

            {{--<div class="f_r" style="margin-bottom: 10px">--}}
            {{--<el-button   size="small"  type="primary" v-if="invoice_bt" @click="dialogVisible_insertTaxNum=true">{{trans('meeting.a10285')}}</el-button>--}}
            {{--<el-button  size="small" type="primary" @click="upload_FN()">{{trans('meeting.sczcwj')}}</el-button>--}}
            {{--<el-button  size="small" type="primary" @click="print_qr()" >打印PDF</el-button>--}}
            {{--<el-button  size="small" type="primary" @click="totalConfirm()" v-if="total_bt">{{trans('meeting.qrzfybtj')}}</el-button>--}}
            {{--<el-button    size="small" type="primary" @click="sendToEoConfirm()" v-if="send_bt" :disabled="send_bt_flg">{{trans('meeting.fseoqr')}}</el-button>--}}
            {{--</div>--}}
        </div>
        <div class="one_body">
            <el-radio v-model="sumradio" label="2"  @click.native.prevent="change_type('2')">{{trans('meeting.lxs')}}</el-radio>
            <el-radio v-model="sumradio" label="1"  @click.native.prevent="change_type('1')">{{trans('meeting.zcjd')}}</el-radio>
            <el-radio v-model="sumradio" label="3"  @click.native.prevent="air_fare('1')" v-if="air_bt">{{trans('meeting.jipiao')}}</el-radio>
            {{--<el-button type="primary" @click="change_type('2')">{{trans('meeting.lxs')}}</el-button>--}}
            {{--<el-button type="primary" @click="change_type('1')" v-if="hotel_bt">{{trans('meeting.zcjd')}}</el-button>--}}
            {{--<el-button type="primary" @click="air_fare('1')" v-if="air_bt">{{trans('meeting.jipiao')}}</el-button>--}}
        </div>

        <!-- 总结算主表 -->
        <div class="one_body" id="table">
            <el-form @submit.native.prevent  ref="form" :model="form" >
                <template v-for="(item,index) in form.tableData_main" v-if="show_hotel">
                    <div class="hotel_css">
                            <span>
                            @{{item.vender_name}}
                        </span>
                        <div class="f_r" style="margin-top: -5px">
                            <el-button type="primary" @click="upload_FN()" size="small" :disabled="role_id==11">{{trans('meeting.sczcwj')}}</el-button>
                            <el-dropdown @command="handleCommand">
                                <el-button type="primary" class="el-dropdown-link" size="small" v-show="type==2" :disabled="role_id==11||!total_bt">
                                    {{--新增--}}
                                    {{trans('meeting.a10284')}}
                                    <i class="el-icon-arrow-down el-icon--right"></i>
                                </el-button>
                                <el-dropdown-menu slot="dropdown" :split-button="true" >
                                    {{--<el-dropdown-item @click.native="hanlddialogVisible('1')">酒店自定义</el-dropdown-item>--}}
                                    {{--<el-dropdown-item @click.native="hanlddialogVisible('5')">用车</el-dropdown-item>--}}
                                    {{--<el-dropdown-item  @click.native="hanlddialogVisible(13)">注册费用</el-dropdown-item>--}}
                                    {{--<el-dropdown-item  @click.native="hanlddialogVisible(11)">签证注册</el-dropdown-item>--}}
                                    {{--<el-dropdown-item  @click.native="hanlddialogVisible(10)">保险费用</el-dropdown-item>--}}
                                    {{--<el-dropdown-item  @click.native="hanlddialogVisible(14)">其它</el-dropdown-item>--}}
                                    {{--<el-dropdown-item @click.native="hanlddialogVisible(12)">简单印刷及制作</el-dropdown-item>--}}
                                    {{--<el-dropdown-item  @click.native="hanlddialogVisible('15')">旅行社人员费</el-dropdown-item>--}}
                                    <el-dropdown-item @click.native="hanlddialogVisible('1')">{{trans('meeting.a10281')}}</el-dropdown-item>
                                    <el-dropdown-item @click.native="hanlddialogVisible('5')">{{trans('meeting.yongche')}}</el-dropdown-item>
                                    <el-dropdown-item  @click.native="hanlddialogVisible(13)">{{trans('meeting.zhucefei')}}</el-dropdown-item>
                                    <el-dropdown-item  @click.native="hanlddialogVisible(11)">{{trans('meeting.a10282')}}</el-dropdown-item>
                                    <el-dropdown-item  @click.native="hanlddialogVisible(10)">{{trans('meeting.baoxianfei')}}</el-dropdown-item>
                                    <el-dropdown-item  @click.native="hanlddialogVisible(14)">{{trans('meeting.b10010')}}</el-dropdown-item>
                                    <el-dropdown-item @click.native="hanlddialogVisible(12)">{{trans('meeting.jiandanysjzz')}}</el-dropdown-item>
                                    <el-dropdown-item  @click.native="hanlddialogVisible('15')">{{trans('meeting.lxsrys')}}</el-dropdown-item>
                                    {{--<el-dropdown-item command="dialogVisible_lvfree">用车</el-dropdown-item>--}}


                                </el-dropdown-menu>
                            </el-dropdown>
                        </div>
                    </div>


                    <div style="margin-bottom: 15px">
                        <table class="newPriceList">
                            <tr :class="{disnone:sumradio=='1'}">
                                <td >酒店(包括酒店内用餐)</td>
                                <td>@{{ item.cost.hotel_free|currency('CNY',2) }}</td>
                            </tr>
                            <tr :class="{disnone:sumradio=='1'}">
                                <td>Pass-through(机票，交通，餐饮等代垫费用)</td>
                                <td>@{{ item.cost.pass_trough_free|currency('CNY',2) }}</td>
                            </tr>
                            <tr :class="{disnone:sumradio=='1'}">
                                <td>注册</td>
                                <td>@{{ item.cost.register_free|currency('CNY',2) }}</td>
                            </tr>
                            <tr :class="{disnone:sumradio=='1'}">
                                <td>服务费(包括旅行社提供的陪同人员费用)</td>
                                <td>@{{ item.cost.server_free|currency('CNY',2) }}</td>
                            </tr>
                            <tr :class="{disnone:sumradio=='1'}">
                                <td>{{trans('meeting.b101015')}}</td>
                                <td>@{{ item.cost.noDirectSerciceFee|currency('CNY',2) }}</td>
                            </tr>
                            <tr>
                                {{--<td>@{{ sumradio==1?'':'增值税额' }}</td>--}}
                                <td v-show="sumradio==2">增值税额</td>
                                <td v-show="sumradio==2">@{{ item.cost.added_tax_free|currency('CNY',2) }}</td>

                                {{--<td>@{{ sumradio==1?'':item.cost.added_tax_free|currency('CNY',2) }}</td>--}}
                                <td v-show="sumradio==2">PO No :</td>
                                <td v-show="sumradio==2">
                                    {{--@{{ item.basic.PO_No }}--}}
                                    <el-input @change="newPriceListchange(item,1)" clearable v-model="item.basic.PO_No" :disabled="role_id==11||!total_bt"></el-input>
                                </td>
                                <td>{{trans('meeting.hydd')}}:</td>
                                <td>@{{ item.basic.city_desc }}</td>
                                <td>供应商联系人姓名</td>
                                <td>@{{ item.basic.supplier_name }}</td>
                                <td>申请人姓名:</td>
                                <td>
                                    {{--@{{ item.basic.applicant_name }}--}}
                                    <el-input @change="newPriceListchange(item,2)"  clearable v-model="item.basic.applicant_name" :disabled="role_id==11||!total_bt"></el-input>

                                </td>
                            </tr>
                            <tr>
                                <td v-show="sumradio==2">增值税后总金额</td>
                                <td v-show="sumradio==2">@{{ item.cost.total_free|currency('CNY',2) }}</td>
                                {{--<td>@{{ sumradio==1?'':'增至税后总金额' }}</td>--}}
                                {{--<td>@{{sumradio==1?'':item.cost.total_free|currency('CNY',2) }}</td>--}}
                                <td>{{trans('meeting.hymc')}}:</td>
                                <td>@{{ item.basic.event_name }}</td>
                                <td>会议时间:</td>
                                <td>@{{ item.basic.event_start_date}}--@{{ item.basic.event_end_date }}</td>
                                <td>供应商邮箱</td>
                                <td>@{{ item.basic.supplier_email}}</td>
                                <td>供应商手机</td>
                                <td>@{{ item.basic.supplier_phone}}</td>
                            </tr>

                        </table>

                    </div>

                    <el-table :data="item.data" style="width: 100%"
                              class="hometable"
                              :header-cell-style="tableheaderClassName">
                        <el-table-column prop="" label="">
                            <el-table-column prop="category_name" label="{{trans('meeting.xmlb')}}" width="150px" >
                            </el-table-column>
                            <el-table-column prop="project_name" label="{{trans('meeting.xmmc')}}" >
                            </el-table-column>
                            <el-table-column prop="is_out_package" label="{{trans('meeting.fwsfwb')}}" min-width="100px" >
                                <template slot-scope="scope">
                                    <el-form-item label="">
                                        <el-select  @visible-change="visibleChange" v-model="scope.row.is_out_package" placeholder="{{trans('meeting.qxz')}}" width="20px" :disabled="permissions||role_id==11" >
                                            <el-option label="{{trans('meeting.shi')}}" value="1"></el-option>
                                            <el-option label="{{trans('meeting.fou')}}" value="0"></el-option>
                                        </el-select>
                                    </el-form-item>
                                </template>
                            </el-table-column>
                            <el-table-column prop="service_name" label="{{trans('meeting.wbfwgysmc')}}" >
                                <template slot-scope="scope" >
                                    <el-input v-show="scope.row.is_out_package==1" v-model="scope.row.service_name" clearable :disabled="role_id==11"></el-input>
                                    <span v-show="scope.row.is_out_package!=1">@{{ scope.row.service_name }}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="invoice_number" label="{{trans('meeting.zdfphm')}}"  min-width="100px" >
                                <template slot-scope="scope" >
                                    <el-input v-show="total_bt" v-model="scope.row.invoice_number" clearable :disabled="role_id==11"></el-input>
                                    <span v-show="!total_bt">@{{ scope.row.invoice_number }}</span>
                                </template>
                            </el-table-column>
                        </el-table-column>
                        <el-table-column prop="" label="{{trans('meeting.htddje')}}">
                            <el-table-column prop="order_unti_price" label="{{trans('meeting.danjia')}}(CNY)">
                            </el-table-column>
                            <el-table-column prop="order_num" label="{{trans('meeting.shuliang')}}">
                            </el-table-column>
                            <el-table-column prop="order_sub_total" label="{{trans('meeting.xiaoji')}}(CNY)">
                            </el-table-column>
                        </el-table-column>
                        <el-table-column prop="" label="{{trans('meeting.sjje')}}">
                            <el-table-column prop="real_unti_price" width="120px" label="{{trans('meeting.danjia')}}(CNY)">
                                <template slot-scope="scope" >
                                    <el-input v-show="total_bt" @change="realdiffmoney(scope.row)" v-model="scope.row.real_unti_price" clearable :disabled="role_id==11"></el-input>
                                    <span v-show="!total_bt">@{{ scope.row.real_unti_price }}</span>
                                </template>
                                {{--<template slot-scope="scope">--}}
                                {{--<template v-if="(scope.row.project_type==3||scope.row.project_type==10||scope.row.project_type==11)&&type==2">--}}
                                    {{--<el-input  clearable v-model="scope.row.real_unti_price" placeholder="{{trans('meeting.danjia')}}" @blur="upPriceOrNum(scope.row,1)" :disabled="permissions"></el-input>--}}
                                    {{--</template>--}}
                                {{--<template v-else>--}}
                                    {{--<span>@{{scope.row.real_unti_price}}</span>--}}
                                    {{--</template>--}}
                                {{--</template>--}}
                            </el-table-column>
                            <el-table-column prop="real_num" width="100px" label="{{trans('meeting.shuliang')}}">
                                {{--<template slot-scope="scope">--}}
                                {{--<template v-if="(scope.row.project_type==3||scope.row.project_type==5||scope.row.project_type==10||scope.row.project_type==11)&&type==2   ">--}}
                                    {{--<el-input  clearable v-model="scope.row.real_num" placeholder="{{trans('meeting.shuliang')}}" @blur="upPriceOrNum(scope.row,2)" :disabled="permissions"></el-input>--}}
                                    {{--</template>--}}
                                {{--<template v-else>--}}
                                    {{--<span>@{{scope.row.real_num}}</span>--}}
                                    {{--</template>--}}
                                {{--</template>--}}
                                <template slot-scope="scope" >
                                    <el-input v-show="total_bt"  @change="realdiffmoney(scope.row)" v-model="scope.row.real_num" clearable :disabled="role_id==11"></el-input>
                                    <span v-show="!total_bt">@{{ scope.row.real_num }}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="real_sub_total" width="120px" label="{{trans('meeting.xiaoji')}}(CNY)">
                                <template slot-scope="scope" >
                                    {{--<el-input v-show="total_bt&&type==2" v-model="scope.row.real_sub_total" clearable></el-input>--}}
                                    <span >@{{ scope.row.real_sub_total|currency('',2)}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="add_tax_money" width="100px" label="{{trans('meeting.zzsse')}}">
                                <template slot-scope="scope" >
                                    <el-input v-show="total_bt" v-model="scope.row.add_tax_money" clearable :disabled="role_id==11"></el-input>
                                    <span v-show="!total_bt" >@{{ scope.row.add_tax_money }}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="is_special" width="150px" label="{{trans('meeting.zdfpsfwzzszyfp')}}">
                                <template slot-scope="scope">
                                    <el-form-item label="">
                                        <el-select  @visible-change="visibleChange" v-model="scope.row.is_special" placeholder="{{trans('meeting.qxz')}}" width="20px" :disabled="permissions||role_id==11" >
                                            <el-option label="{{trans('meeting.shi')}}" value="1"></el-option>
                                            <el-option label="{{trans('meeting.fou')}}" value="0"></el-option>
                                            <el-option label="{{trans('meeting.qxz')}}" value="2"></el-option>
                                        </el-select>
                                    </el-form-item>
                                </template>
                            </el-table-column>
                        </el-table-column>
                        <el-table-column prop="" label="" >
                            <el-table-column prop="diff_num" width="100px" label="{{trans('meeting.a10286')}}">
                                <template slot-scope="scope" >
                                    {{--<el-input v-show="total_bt&&type==2" v-model="scope.row.diff_num" clearable></el-input>--}}
                                    <span >@{{ scope.row.diff_num |currency('',2)}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="total_remark" label="{{trans('meeting.fybgsm')}}" min-width="200px">
                                <template slot-scope="scope">
                                    <el-form-item label="">
                                        {{--<el-input    resize="none" clearable v-model="scope.row.total_remark" :class="(difference_FN(scope.row))?'warning_border':''" @focus="focus_difference_FN(scope.row)"--}}
                                                         {{--:rows="calcRows(scope.row.total_remark)"--}}
                                                         {{--:disabled="permissions"></el-input>--}}
                                        <div class="txtarea"  :class="(difference_FN(scope.row))?'warning_border':''" @click="focus_difference_FN(scope.row)">
                                            <span>@{{ scope.row.total_remark }}</span>
                                        </div>
                                    </el-form-item>
                                </template>
                            </el-table-column>
                            {{--<el-table-column prop="" label="{{trans('meeting.caozuo')}}" width="180px" >--}}
                            {{--<template slot-scope="scope">--}}
                                {{--<template v-if="total_bt&&(role_id==2||role_id==9)">--}}
                                    {{--<!-- <el-button  type="primary" size="mini" @click="open_detail_table(scope.row)">明细</el-button> -->--}}
                                    {{--<el-button type="text"  size="mini" @click="upPriceOrNumfree(scope.row)">确认费用</el-button>--}}
                                    {{--</template>--}}


                                {{--<template v-if="scope.row.has_detail==1&&detail_bt">--}}
                                    {{--<!-- <el-button  type="primary" size="mini" @click="open_detail_table(scope.row)">明细</el-button> -->--}}
                                    {{--<el-button type="text" @click="open_detail_table(scope.row)" size="mini">{{trans('meeting.mingxi')}}</el-button>--}}
                                    {{--</template>--}}
                                {{--<template v-if="scope.row.is_prev==1&&detail_bt">--}}
                                    {{--<el-button type="text" @click="open_detail_table(scope.row)" size="mini">{{trans('meeting.tqjs')}}</el-button>--}}
                                    {{--</template>--}}

                                {{--<template v-if="scope.row.share_type==0&&share_bt">--}}
                                    {{--<el-button type="text" size="mini" @click="openShareUserList(scope.row)">{{trans('meeting.yifentan')}}</el-button>--}}
                                    {{--</template>--}}
                                {{--<template v-if="scope.row.share_type==1&&share_bt">--}}
                                    {{--<el-button type="text" size="mini" @click="openSharePepleList(scope.row)">{{trans('meeting.a10287')}}</el-button>--}}
                                    {{--</template>--}}
                                {{--<template v-if="scope.row.share_type==2&&share_bt">--}}
                                    {{--<el-button type="text" size="mini" @click="openSharePepleList(scope.row)">{{trans('meeting.a10288')}}</el-button>--}}
                                    {{--</template>--}}
                                {{--<template v-if="scope.row.share_type==3&&share_bt">--}}
                                    {{--<el-button type="text" size="mini" @click="costShare(scope.row)">{{trans('meeting.a10289')}}</el-button>--}}
                                    {{--</template>--}}
                                {{--<!-- <template v-if="scope.row.is_scene==1">--}}
                                    {{--<el-button type="text" @click="dialogVisible_real=true" size="mini">--}}
                                        {{--<span class="danger_css">删除</span>--}}
                                    {{--</el-button>--}}

                                {{--</template> -->--}}


                                {{--</template>--}}
                            {{--</el-table-column>--}}
                        </el-table-column>

                        <el-table-column prop="" label="{{trans('meeting.b101024')}}" width="180px"
                                         class-name="discaozuo"        fixed="right">
                            <template slot-scope="scope" >
                                <template v-if="total_bt&&(role_id==2||role_id==9)">
                                    <!-- <el-button  type="primary" size="mini" @click="open_detail_table(scope.row)">明细</el-button> -->
                                    <el-button type="text"  size="mini" @click="upPriceOrNumfree(scope.row)" :disabled="role_id==11">{{trans('meeting.baocun')}}</el-button>
                                </template>


                                <template v-if="scope.row.has_detail==1&&detail_bt">
                                    <!-- <el-button  type="primary" size="mini" @click="open_detail_table(scope.row)">明细</el-button> -->
                                    {{--<el-button type="text" @click="open_detail_table(scope.row)" size="mini">{{trans('meeting.mingxi')}}</el-button>--}}
                                </template>
                                <template v-if="scope.row.is_prev==1&&detail_bt">
                                    <el-button type="text" @click="open_detail_table(scope.row)" size="mini" :disabled="role_id==11||!total_bt">{{trans('meeting.tqjs')}}</el-button>
                                </template>

                                <template v-if="scope.row.share_type==0&&share_bt">
                                    <el-button type="text" size="mini" @click="openShareUserList(scope.row)" :disabled="role_id==11||!total_bt">{{trans('meeting.yifentan')}}</el-button>
                                </template>
                                <template v-if="scope.row.share_type==1&&share_bt">
                                    <el-button type="text" size="mini" @click="openSharePepleList(scope.row)" :disabled="role_id==11||!total_bt">{{trans('meeting.a10287')}}</el-button>
                                </template>
                                <template v-if="scope.row.share_type==2&&share_bt">
                                    <el-button type="text" size="mini" @click="openSharePepleList(scope.row)" :disabled="role_id==11||!total_bt">{{trans('meeting.a10288')}}</el-button>
                                </template>
                                <template v-if="scope.row.share_type==3&&share_bt">
                                    <el-button type="text" size="mini" @click="costShare(scope.row)" :disabled="role_id==11||!total_bt">{{trans('meeting.a10289')}}</el-button>
                                </template>
                                <!-- <template v-if="scope.row.is_scene==1">
                                    <el-button type="text" @click="dialogVisible_real=true" size="mini">
                                        <span class="danger_css">删除</span>
                                    </el-button>

                                </template> -->
                            </template>
                        </el-table-column>
                    </el-table>
                </template>
            </el-form>


        </div>
        <!-- 上传文件弹出框 -->
        <ht-modal title="{{trans('meeting.sczcwj')}}" :visible.sync="dialogVisible_upload" width="50%">
            <div class="dialog">
                <el-table :data="upload_data.data" border style="width: 100%" :header-cell-style="tableheaderClassName">
                    <el-table-column type="index" width="80px" label="{{trans('meeting.xuhao')}}">
                    </el-table-column>
                    <el-table-column prop="project_type" label="{{trans('meeting.a10290')}}">
                        <template slot-scope="scope">
                            <el-select  @visible-change="visibleChange" v-model="scope.row.project_type"  v-show="type==2" placeholder="{{trans('meeting.qxzhdqy')}}">
                                <el-option label="{{trans('meeting.fangjian')}}" value="1"></el-option>
                                <el-option label="{{trans('meeting.huichang')}}" value="2"></el-option>
                                <el-option label="{{trans('meeting.chaxie')}}" value="3"></el-option>
                                <el-option label="{{trans('meeting.jdnrc')}}" value="4"></el-option>
                                <el-option label="{{trans('meeting.jsycdc')}}" value="5"></el-option>
                                <el-option label="{{trans('meeting.jsycwf')}}" value="6"></el-option>
                                <el-option label="{{trans('meeting.baoche')}}" value="7"></el-option>
                                <el-option label="{{trans('meeting.jsyccsf')}}" value="8"></el-option>
                                <el-option label="{{trans('meeting.ydwyc')}}" value="9"></el-option>
                                <el-option label="{{trans('meeting.baoxian')}}" value="10"></el-option>
                                <el-option label="{{trans('meeting.qianzheng')}}" value="11"></el-option>
                                <el-option label="{{trans('meeting.jdysjzz')}}" value="12"></el-option>
                                <el-option label="{{trans('meeting.zhuce')}}" value="13"></el-option>
                                <el-option label="{{trans('meeting.qita')}}" value="14"></el-option>
                                <el-option label="{{trans('meeting.lxsrys')}}" value="15"></el-option>
                                <el-option label="{{trans('meeting.qpcsf')}}" value="16"></el-option>
                                <el-option label="{{trans('meeting.djcsf')}}" value="17"></el-option>
                                <el-option label="{{trans('meeting.a10100')}}" value="18"></el-option>
                            </el-select>

                            <el-select  @visible-change="visibleChange" v-model="scope.row.project_type"  v-show="type==1" placeholder="{{trans('meeting.qxzhdqy')}}">
                                <el-option label="{{trans('meeting.hys')}}" value="1"></el-option>
                                <el-option label="{{trans('meeting.chaxie')}}" value="2"></el-option>
                                <el-option label="{{trans('meeting.jdzs')}}" value="3"></el-option>
                                <el-option label="{{trans('meeting.canyin')}}" value="4"></el-option>
                                <el-option label="{{trans('meeting.hyb')}}" value="5"></el-option>
                                <el-option label="{{trans('meeting.sheshi')}}" value="6"></el-option>
                                <el-option label="{{trans('meeting.b10010')}}" value="7"></el-option>
                            </el-select>
                        </template>

                    </el-table-column>
                    <el-table-column prop="address" label="{{trans('meeting.sczcwj')}}">
                        <template slot-scope="scope">
                            <el-upload class="upload-demo" action="/total/totalUpFile" name="file_key" :show-file-list="false" :on-success="upload_success">

                                <el-button size="small" type="primary" @click="chose_upload_type(scope.row.project_type,scope.$index)" :disabled="role_id==11">{{trans('meeting.a10019')}}</el-button>
                            </el-upload>
                            <div>
                                <a :href="scope.row.url">@{{scope.row.name}}</a>
                            </div>

                        </template>
                    </el-table-column>
                    <el-table-column prop="address" label="{{trans('meeting.caozuo')}}">
                        <template slot-scope="scope">
                            <el-button  type="primary" @click="add_upload()" :disabled="role_id==11">{{trans('meeting.zengjia')}}</el-button>
                            <el-button type="danger" @click="remove_upload(scope.row)" :disabled="role_id==11">{{trans('meeting.shanchu')}}</el-button>
                        </template>
                    </el-table-column>
                </el-table>
            </div>
            <div class="footerhtm">
                <el-button @click="dialogVisible_upload = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="StoreSupportFile()" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
                <el-button  type="primary" @click="add_upload()" v-show="upload_data.data.length==0" :disabled="role_id==11">{{trans('meeting.zengjia')}}</el-button>
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_upload = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="StoreSupportFile()">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>



        {{--<!-- 新增酒店自定义 -->--}}
        {{--<el-dialog title="新增酒店自定义" :visible.sync="dialogVisible_custom" width="50%">--}}
        {{--<div class="dialog">--}}
            {{--<el-form @submit.native.prevent  :rules="addHotelData_rules" :model="addHotelData" ref="add_hotel_ref" label-width="180px">--}}
                {{--<el-form-item label="酒店自定义名称：" prop="project_name" :rules="addHotelData_rules.required_ele">--}}
                    {{--<el-col :span="16">--}}
                        {{--<el-input  clearable v-model="addHotelData.project_name"></el-input>--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="日期：" prop="date" :rules="addHotelData_rules.required_ele">--}}
                    {{--<el-col :span="16">--}}
                        {{--<el-date-picker v-model="addHotelData.date" type="date" placeholder="选择日期">--}}
                            {{--</el-date-picker>--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="单价（/人）：" prop="price" :rules="addHotelData_rules.required_ele">--}}
                    {{--<el-col :span="16">--}}
                        {{--<el-input  clearable v-model="addHotelData.price" @change="sub_num()"></el-input>--}}
                        {{--</el-col>--}}
                    {{--<el-col :span="4">--}}
                        {{--CNY--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="人数：" prop="num" :rules="addHotelData_rules.required_ele">--}}
                    {{--<el-col :span="16">--}}
                        {{--<el-input  clearable v-model="addHotelData.num" @change="sub_num()"></el-input>--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<!-- 小计=单价*人数 -->--}}
                {{--<el-form-item label="小计：" prop="sub" :rules="addHotelData_rules.required_ele">--}}
                    {{--<el-col :span="16">--}}
                        {{--<el-input  clearable v-model="addHotelData.sub" disabled="true"></el-input>--}}
                        {{--</el-col>--}}
                    {{--<el-col :span="4">--}}
                        {{--CNY--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--</el-form>--}}

            {{--</div>--}}
        {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_custom = false">取 消</el-button>--}}
                {{--<el-button type="primary" @click="addHotle()">确 定</el-button>--}}
            {{--</span>--}}
        {{--</el-dialog>--}}
        {{--<!-- 新增用车 -->--}}
        {{--<el-dialog title="新增地面交通" :visible.sync="dialogVisible_car" width="50%">--}}
        {{--<div class="dialog">--}}
            {{--<el-form @submit.native.prevent  ref="form" :model="form" label-width="100px">--}}
                {{--<el-form-item label="用车时间：">--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-date-picker v-model="value1" type="date" placeholder="选择日期">--}}
                            {{--</el-date-picker>--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<el-row>--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-form-item label="上车地点：">--}}
                            {{--<el-input  clearable v-model="form.name"></el-input>--}}
                            {{--</el-form-item>--}}
                        {{--</el-col>--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-form-item label="下车地点：">--}}
                            {{--<el-input  clearable v-model="form.name"></el-input>--}}
                            {{--</el-form-item>--}}
                        {{--</el-col>--}}
                    {{--</el-row>--}}



                {{--<el-form-item label="订车人：">--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-input  clearable v-model="form.name"></el-input>--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<el-row>--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-form-item label="车型：">--}}
                            {{--<el-select  @visible-change="visibleChange" v-model="form.region" placeholder="请选择活动区域">--}}
                                {{--<el-option label="区域一" value="shanghai"></el-option>--}}
                                {{--<el-option label="区域二" value="beijing"></el-option>--}}
                                {{--</el-select>--}}
                            {{--</el-form-item>--}}
                        {{--</el-col>--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-form-item label="行程类型：">--}}
                            {{--<el-select  @visible-change="visibleChange" v-model="form.region" placeholder="请选择活动区域">--}}
                                {{--<el-option label="区域一" value="shanghai"></el-option>--}}
                                {{--<el-option label="区域二" value="beijing"></el-option>--}}
                                {{--</el-select>--}}
                            {{--</el-form-item>--}}
                        {{--</el-col>--}}
                    {{--</el-row>--}}


                {{--<el-form-item label="单价：">--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-input  clearable v-model="form.name" placeholder="车/次"></el-input>--}}
                        {{--</el-col>--}}
                    {{--<el-col :span="4">--}}
                        {{--CNY--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="人数：">--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-input  clearable v-model="form.name"></el-input>--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="趟数：">--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-input  clearable v-model="form.name"></el-input>--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--<!-- 小计=单价*趟数 -->--}}
                {{--<el-form-item label="小计：">--}}
                    {{--<el-col :span="8">--}}
                        {{--<el-input  clearable v-model="form.name"></el-input>--}}
                        {{--</el-col>--}}
                    {{--<el-col :span="4">--}}
                        {{--CNY--}}
                        {{--</el-col>--}}
                    {{--</el-form-item>--}}
                {{--</el-form>--}}
            {{--<div class="seach_table">--}}
                {{--<el-col :span="8">--}}
                    {{--<span>实际新增用车人名单</span>--}}
                    {{--</el-col>--}}
                {{--<el-col :span="8">--}}
                    {{--<el-input  clearable v-model="use_car_input" placeholder="请输入内容"></el-input>--}}
                    {{--</el-col>--}}
                {{--<el-col :span="4">--}}
                    {{--<el-button type="primary" @click="searchUser()">搜索</el-button>--}}
                    {{--</el-col>--}}


                {{--</div>--}}
            {{--<el-table :data="use_car_table" border style="width: 100%">--}}
                {{--<el-table-column prop="name" label="姓名">--}}
                    {{--</el-table-column>--}}
                {{--<el-table-column prop="sex" label="性别">--}}
                    {{--</el-table-column>--}}
                {{--<el-table-column prop="city" label="城市">--}}
                    {{--</el-table-column>--}}
                {{--<el-table-column prop="company" label="单位">--}}
                    {{--</el-table-column>--}}
                {{--<el-table-column prop="department" label="部门">--}}
                    {{--</el-table-column>--}}
                {{--<el-table-column prop="user_type" label="类型">--}}
                    {{--</el-table-column>--}}
                {{--<el-table-column prop="sale_man" label="销售代表">--}}
                    {{--</el-table-column>--}}
                {{--<el-table-column prop="phone" label="手机">--}}
                    {{--</el-table-column>--}}
                {{--<el-table-column prop="" label="操作">--}}
                    {{--<template slot-scope="scope">--}}
                        {{--<el-button type="success">增加</el-button>--}}
                        {{--<el-button type="success">删除</el-button>--}}
                        {{--</template>--}}
                    {{--</el-table-column>--}}
                {{--</el-table>--}}

            {{--</div>--}}
        {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_car = false">取 消</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_car = false">确 定</el-button>--}}
            {{--</span>--}}
        {{--</el-dialog>--}}
        {{--<!-- 新增注册费用 -->--}}
        {{--<el-dialog title="新增注册费用" :visible.sync="dialogVisible_registration" width="50%">--}}
        {{--<div class="dialog">--}}
            {{--<el-form @submit.native.prevent  ref="form" :model="form" label-width="80px">--}}
                {{--<el-form-item label="单价（/车/次）：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="人数：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>--}}
                    {{--</el-form-item>--}}
                {{--<!-- 小计=单价*人数 -->--}}
                {{--<el-form-item label="小计：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--</el-form>--}}
            {{--</div>--}}
        {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_registration = false">取 消</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_registration = false">确 定</el-button>--}}
            {{--</span>--}}
        {{--</el-dialog>--}}
        {{--<!-- 新增签证费用 -->--}}
        {{--<el-dialog title="新增签证费用" :visible.sync="dialogVisible_visa" width="50%">--}}
        {{--<div class="dialog">--}}
            {{--<el-form @submit.native.prevent  ref="form" :model="form" label-width="80px">--}}
                {{--<el-form-item label="单价（/车/次）：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="人数：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>--}}
                    {{--</el-form-item>--}}
                {{--<!-- 小计=单价*人数 -->--}}
                {{--<el-form-item label="小计：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--</el-form>--}}
            {{--</div>--}}
        {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_visa = false">取 消</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_visa = false">确 定</el-button>--}}
            {{--</span>--}}
        {{--</el-dialog>--}}
        {{--<!-- 新增保险费用 -->--}}
        {{--<el-dialog title="新增保险费用" :visible.sync="dialogVisible_insurance" width="50%">--}}
        {{--<div class="dialog">--}}
            {{--<el-form @submit.native.prevent  ref="form" :model="form" label-width="80px">--}}
                {{--<el-form-item label="单价（/车/次）：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="人数：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>--}}
                    {{--</el-form-item>--}}
                {{--<!-- 小计=单价*人数 -->--}}
                {{--<el-form-item label="小计：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--</el-form>--}}
            {{--</div>--}}
        {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_insurance = false">取 消</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_insurance = false">确 定</el-button>--}}
            {{--</span>--}}
        {{--</el-dialog>--}}
        {{--<!-- 新增其他费用 -->--}}
        {{--<el-dialog title="新增其他费用" :visible.sync="dialogVisible_other" width="50%">--}}
        {{--<div class="dialog">--}}
            {{--<el-form @submit.native.prevent  ref="form" :model="form" label-width="80px">--}}
                {{--<el-form-item label="单价（/车/次）：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="人数：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>--}}
                    {{--</el-form-item>--}}
                {{--<!-- 小计=单价*人数 -->--}}
                {{--<el-form-item label="小计：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--</el-form>--}}
            {{--</div>--}}
        {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_other = false">取 消</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_other = false">确 定</el-button>--}}
            {{--</span>--}}
        {{--</el-dialog>--}}
        {{--<!-- 新增简单印刷及制作费用 -->--}}
        {{--<el-dialog title="新增简单印刷及制作费用" :visible.sync="dialogVisible_printing" width="50%">--}}
        {{--<div class="dialog">--}}
            {{--<el-form @submit.native.prevent  ref="form" :model="form" label-width="80px">--}}
                {{--<el-form-item label="单价（/车/次）：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--<el-form-item label="人数：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>--}}
                    {{--</el-form-item>--}}
                {{--<!-- 小计=单价*人数 -->--}}
                {{--<el-form-item label="小计：">--}}
                    {{--<el-input  clearable v-model="form.name"></el-input>CNY--}}
                    {{--</el-form-item>--}}
                {{--</el-form>--}}
            {{--</div>--}}
        {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_printing = false">取 消</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_printing = false">确 定</el-button>--}}
            {{--</span>--}}
        {{--</el-dialog>--}}

        <!--费用明细 -->
        <ht-modal :title="'{{trans('meeting.a10291')}}' " :visible.sync="dialogVisible_real" width="60%">
            <div class="dialog">
                <div class="seach_table">
                    <!-- <el-select  @visible-change="visibleChange" v-model="value" placeholder="{{trans('meeting.qxz')}}">
                        <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value">
                        </el-option>
                    </el-select>
                    <el-select  @visible-change="visibleChange" v-model="value" placeholder="{{trans('meeting.qxz')}}">
                        <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value">
                        </el-option>
                    </el-select> -->
                    <el-col :span="5" :offset="1">
                        <el-input  clearable v-model="search_hotel_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>
                    </el-col>
                    <el-col :span="5" :offset="1">
                        <el-input  clearable v-model="search_hotel_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>
                    </el-col>
                    <el-col :span="5" :offset="1">
                        <el-select  @visible-change="visibleChange" v-model="search_hotel_data.sex" placeholder="{{trans('meeting.xingbie')}}">
                            <el-option label="{{trans('meeting.nan')}}" value="1">
                            </el-option>
                            <el-option label="{{trans('meeting.nv')}}" value="2">
                            </el-option>
                        </el-select>
                    </el-col>
                    <el-col :span="5" :offset="1">
                        <el-input  clearable v-model="search_hotel_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>
                    </el-col>


                    <el-col :span="5" :offset="1" class="mart15">
                        <el-select  @visible-change="visibleChange" v-model="search_hotel_data.hotel_id" placeholder="{{trans('meeting.rzjd')}}">
                            <!-- <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value">
                            </el-option> -->
                        </el-select>
                    </el-col>
                    <el-col :span="5" :offset="1" class="mart15">
                        <el-select  @visible-change="visibleChange" v-model="search_hotel_data.ar_id" placeholder="{{trans('meeting.ffzt')}}">
                            <el-option label="{{trans('meeting.a10292')}}" value="0">
                            </el-option>
                            <el-option label="{{trans('meeting.a10269')}}" value="1">
                            </el-option>
                        </el-select>
                    </el-col>
                    <el-col :span="7" :offset="1" class="mart15">
                        <el-button  type="primary" @click="stayDetailed()" :disabled="role_id==11">{{trans('meeting.sousuo')}}</el-button>
                        <el-button  type="primary" :disabled="role_id==11">{{trans('meeting.fyft')}}</el-button>

                    </el-col>

                    {{--<el-col :span="3" class="mart15 " >--}}
                    {{--<span class="spantop" style="margin-top: 15px">--}}
                          {{--总计: @{{search_hotel_data.total_money}}--}}
                        {{--</span>--}}
                    {{--</el-col>--}}

                    {{--<el-col :span="4">--}}
                    {{--<el-button  type="primary">{{trans('meeting.fyft')}}</el-button>--}}
                    {{--</el-col>--}}
                    {{--<el-col :span="4">--}}
                    {{--<span>--}}
                            {{--@{{search_hotel_data.total_money}}--}}
                        {{--</span>--}}
                    {{--</el-col>--}}

                </div>
                <el-table :data="hotel_hotel_data" border :header-cell-style="tableheaderClassName" style="width: 100%">
                    <el-table-column prop="attendee_code" label="{{trans('meeting.canhuirenbh')}}">
                    </el-table-column>
                    <el-table-column prop="name" label="{{trans('meeting.xingming')}}">
                    </el-table-column>
                    <el-table-column prop="city" label="{{trans('meeting.cs')}}">
                    </el-table-column>
                    <el-table-column prop="sex" label="{{trans('meeting.xingbie')}}">
                    </el-table-column>
                    <el-table-column prop="flight_number" label="{{trans('meeting.hangbanhao')}}">
                    </el-table-column>
                    <el-table-column prop="start_off_date" label="{{trans('meeting.chufariqi')}}">
                    </el-table-column>
                    <el-table-column prop="start_off_time" label="{{trans('meeting.cfsj')}}">
                    </el-table-column>
                    <el-table-column prop="check_in_date" label="{{trans('meeting.daodariqi')}}">
                    </el-table-column>
                    <el-table-column prop="check_in_time" label="{{trans('meeting.daodashijian')}}">
                    </el-table-column>
                    <el-table-column prop="out_in_time" label="{{trans('meeting.ldrq')}}">
                    </el-table-column>
                    <el-table-column prop="remark" label="{{trans('meeting.beizhu')}}">
                    </el-table-column>
                    <el-table-column prop="hotel_name" label="{{trans('meeting.rzjd')}}">
                    </el-table-column>
                    <el-table-column prop="room_type" label="{{trans('meeting.fangxing')}}">
                        <template slot-scope="scope">
                            <span v-show="scope.row.room_type=='1'">{{trans('meeting.danjian')}}</span>
                            <span v-show="scope.row.room_type=='2'">{{trans('meeting.shuangrenjian')}}</span>
                        </template>
                    </el-table-column>
                    <el-table-column prop="room_num" label="{{trans('meeting.a10242')}}">
                    </el-table-column>
                    <el-table-column prop="staty_date" label="{{trans('meeting.rzrq')}}">
                    </el-table-column>
                    <el-table-column prop="goods_price" label="{{trans('meeting.danjia')}}">
                    </el-table-column>
                    <el-table-column prop="weight" label="{{trans('meeting.quanzhong')}}">
                    </el-table-column>
                    <el-table-column prop="room_money" label="{{trans('meeting.fanggei')}}">
                    </el-table-column>
                </el-table>
            </div>
            <div class="footerhtm">
                <el-button @click="dialogVisible_real = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="dialogVisible_real = false" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_real = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_real = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>
        <!--签证费用明细 -->
        <ht-modal :title="'{{trans('meeting.a10293')}}'" :visible.sync="dialogVisible_real_visa" width="70%">
            <div class="dialog">
                <div class="seach_table">
                    <el-row >
                        <el-col :span="5" :offset="1">
                            <el-input clearable v-model="search_visa_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input  clearable v-model="search_visa_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input   clearable v-model="search_visa_data.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input  clearable v-model="search_visa_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>
                        </el-col>
                    </el-row>
                    <el-row  class="mart15">
                        <el-col :span="8" :offset="1">
                            <el-button  type="primary" @click="visaList()" :disabled="role_id==11">{{trans('meeting.sousuo')}}</el-button>
                            <el-button  type="primary" :disabled="role_id==11">{{trans('meeting.fyft')}}</el-button>
                        </el-col>
                        {{--<el-col :span="5" :offset="1">--}}
                        {{--<span class="spantop">--}}
                        {{--总计：@{{search_visa_data.total_money}}--}}
                            {{--</span>--}}
                        {{--</el-col>--}}
                    </el-row>

                    {{--<el-input class="inputm" clearable v-model="search_visa_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>--}}
                    {{--<el-input class="inputm" clearable v-model="search_visa_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>--}}
                    {{--<el-input  class="inputm" clearable v-model="search_visa_data.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>--}}
                    {{--<el-input  class="inputm" clearable v-model="search_visa_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>--}}
                    {{--<!-- <el-date-picker v-model="value1" type="date" placeholder="{{trans('meeting.xzrq')}}">--}}
                    {{--</el-date-picker> -->--}}
                    {{--<el-button  type="primary" @click="visaList()">{{trans('meeting.sousuo')}}</el-button>--}}
                    {{--<el-button  type="primary">{{trans('meeting.fyft')}}</el-button>--}}
                    {{--<span>--}}
                        {{--总计：@{{search_visa_data.total_money}}--}}
                    {{--</span>--}}
                </div>
                <el-table :data="real_visa_data" border :header-cell-style="tableheaderClassName" style="width: 100%">
                    <el-table-column prop="attendee_code" label="{{trans('meeting.canhuirenbh')}}">
                    </el-table-column>
                    <el-table-column prop="region" label="{{trans('meeting.daqu')}}">
                    </el-table-column>
                    <el-table-column prop="city" label="{{trans('meeting.cs')}}">
                    </el-table-column>
                    <el-table-column prop="name" label="{{trans('meeting.xingming')}}">
                    </el-table-column>
                    <el-table-column prop="sex" label="{{trans('meeting.xingbie')}}">
                    </el-table-column>
                    <el-table-column prop="company" label="{{trans('meeting.yygzdw')}}">
                    </el-table-column>
                    <el-table-column prop="phone" label="{{trans('meeting.shoujihao')}}">
                    </el-table-column>
                    <el-table-column prop="money" label="{{trans('meeting.a10252')}}（CNY）">
                        <template slot-scope="scope">
                            <el-input  clearable v-model="scope.row.money" placeholder="" @blur="upVisaMoney(scope.row)"></el-input>
                        </template>
                    </el-table-column>
                    <el-table-column prop="is_ok" label="{{trans('meeting.a10295')}}">
                        <template slot-scope="scope">
                            <template v-if="scope.row.is_ok=='1'">
                                <el-button  type="primary" @click="visaBlance(scope.row)" :disabled="role_id==11">{{trans('meeting.shi')}}</el-button>
                            </template>
                            <template v-if="scope.row.is_ok=='0'">
                                <el-button type="info" @click="visaBlance(scope.row)" :disabled="role_id==11">{{trans('meeting.fou')}}</el-button>
                            </template>
                        </template>
                    </el-table-column>
                    <el-table-column prop="ok_time" label="{{trans('meeting.a10296')}}">
                    </el-table-column>


                </el-table>
            </div>
            <div class="footerhtm">
                <el-button @click="dialogVisible_real_visa = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="dialogVisible_real_visa = false" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_real_visa = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_real_visa = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>
        <!-- 餐饮明细 -->
        <ht-modal :title="'{{trans('meeting.a10297')}}'" :visible.sync="dialogVisible_food" width="70%">
            <div class="dialog">
                <el-table :data="food_head_data" :header-cell-style="tableheaderClassName" border style="width: 100%">
                    <el-table-column prop="name" label="{{trans('meeting.sjycxm')}}" width="180">
                    </el-table-column>
                    <el-table-column prop="people_num" label="{{trans('meeting.sjycrs')}}" width="180">
                    </el-table-column>
                    <el-table-column prop="money" label="{{trans('meeting.sjzfy')}}">
                    </el-table-column>
                    <el-table-column prop="average" label="{{trans('meeting.rjfy')}}">
                    </el-table-column>
                </el-table>
                <div class="search_food_head_data">
                    <el-row  class="mart15">
                        <el-col :span="5" :offset="1">

                            <el-input  clearable v-model="search_food_head_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input  clearable v-model="search_food_head_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input  clearable v-model="search_food_head_data.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input  clearable v-model="search_food_head_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>
                        </el-col>
                    </el-row>
                    <el-row class="mart15">
                        <el-col :span="7" :offset="1">
                            <el-date-picker v-model="value1" type="date" placeholder="{{trans('meeting.xzrq')}}">
                            </el-date-picker>
                        </el-col>
                        <el-col :span="6" :offset="1"  class="spantop">
                            <el-button  type="primary" @click="foodhandleCurrentChange(1)" :disabled="role_id==11">{{trans('meeting.sousuo')}}</el-button>
                            <el-button  type="primary" :disabled="role_id==11">{{trans('meeting.fyft')}}</el-button>
                        </el-col>
                        {{--<el-col :span="5" :offset="1">--}}
                        {{--<span class="spantop" style="margin-top: 12px">--}}
                                {{--总计：@{{search_food_head_data.total_money}}--}}
                            {{--</span>--}}
                        {{--</el-col>--}}
                    </el-row>

                    {{--<el-input class="inputmd" clearable v-model="search_food_head_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>--}}
                    {{--<el-input class="inputmd" clearable v-model="search_food_head_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>--}}
                    {{--<el-input class="inputmd" clearable v-model="search_food_head_data.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>--}}
                    {{--<el-input class="inputmd" clearable v-model="search_food_head_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>--}}
                    {{--<el-date-picker v-model="value1" type="date" placeholder="{{trans('meeting.xzrq')}}">--}}
                    {{--</el-date-picker>--}}
                    {{--<el-button  type="primary" @click="resDetailed()">{{trans('meeting.sousuo')}}</el-button>--}}
                    {{--<el-button  type="primary">{{trans('meeting.fyft')}}</el-button>--}}
                    {{--<span>--}}
                        {{--总计：@{{search_food_head_data.total_money}}--}}
                    {{--</span>--}}
                </div>
                <el-table :data="food_body_data" border :header-cell-style="tableheaderClassName" style="width: 100%">
                    <el-table-column prop="attendee_code" label="{{trans('meeting.canhuirenbh')}}">
                    </el-table-column>
                    <!-- <el-table-column prop="region" label="大区">
                    </el-table-column> -->
                    <el-table-column prop="city" label="{{trans('meeting.cs')}}">
                    </el-table-column>
                    <el-table-column prop="name" label="{{trans('meeting.xingming')}}">
                    </el-table-column>
                    <!-- <el-table-column prop="sex" label="性别">
                    </el-table-column> -->
                    <!-- <el-table-column prop="" label="航班号">
                    </el-table-column>
                    <el-table-column prop="" label="{{trans('meeting.cfsj')}}">
                    </el-table-column>
                    <el-table-column prop="" label="抵达日期">
                    </el-table-column>
                    <el-table-column prop="" label="离店日期">
                    </el-table-column> -->
                    <el-table-column prop="remark" label="{{trans('meeting.beizhu')}}">
                    </el-table-column>
                    <el-table-column prop="hotel_name" label="{{trans('meeting.rzjd')}}">
                    </el-table-column>
                    <!-- <el-table-column prop="phone" label="用餐日期">
                    </el-table-column>
                    <el-table-column prop="money" label="餐饮类型">
                    </el-table-column>
                    <el-table-column prop="is_out" label="是否用餐">
                        <template slot-scope="scope">
                            <el-checkbox v-model="scope.row.is_out"></el-checkbox>
                        </template>
                    </el-table-column>
                    <el-table-column prop="is_out" label="{{trans('meeting.sjycxm')}}">
                    </el-table-column>
                    <el-table-column prop="money" label="费用">
                    </el-table-column> -->
                </el-table>
            </div>
            <div class="footerhtm">
                <el-button @click="dialogVisible_food = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="dialogVisible_food = false" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_food = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_food = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
            <div class="tac"v-show="foodtotal!=0">
                <el-pagination @size-change="foodhandleSizeChange" @current-change="foodhandleCurrentChange" :current-page.sync="foodpage" layout="prev, pager, next"
                               :page-size="foodpagesize" :total="foodtotal">
                </el-pagination>
            </div>
        </ht-modal>
        <!-- 保险明细 -->
        <ht-modal :title="'{{trans('meeting.a10298')}}'" :visible.sync="dialogVisible_insurance" width="50%">
            <div class="dialog">
                <div class="search_insurance_data">
                    <el-input class="inputm" clearable v-model="search_insurance_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>
                    <el-input class="inputm" clearable v-model="search_insurance_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>
                    <el-input class="inputm" clearable v-model="search_insurance_data.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>
                    <el-input class="inputm" clearable v-model="search_insurance_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>
                    <!-- <el-date-picker v-model="value1" type="date" placeholder="{{trans('meeting.xzrq')}}"> -->
                    <!-- </el-date-picker> -->
                    <el-button  type="primary" @click="safeDetail()" :disabled="role_id==11">{{trans('meeting.sousuo')}}</el-button>
                    <el-button  type="primary" :disabled="role_id==11">{{trans('meeting.fyft')}}</el-button>
                    {{--<span>--}}
                        {{--总计：@{{search_insurance_data.total_money}}--}}
                    {{--</span>--}}
                </div>
                <el-table :data="insurance_data" border :header-cell-style="tableheaderClassName" style="width: 100%">
                    <el-table-column prop="attendee_id" label="{{trans('meeting.canhuirenbh')}}">
                    </el-table-column>
                    <!-- <el-table-column prop="region" label="大区">
                    </el-table-column> -->
                    <el-table-column prop="city" label="{{trans('meeting.cs')}}">
                    </el-table-column>
                    <el-table-column prop="name" label="{{trans('meeting.xingming')}}">
                    </el-table-column>
                    <el-table-column prop="sex" label="{{trans('meeting.xingbie')}}">
                    </el-table-column>
                    <el-table-column prop="company" label="{{trans('meeting.yygzdw')}}">
                    </el-table-column>
                    <el-table-column prop="phone" label="{{trans('meeting.shoujihao')}}">
                    </el-table-column>
                    <el-table-column prop="is_safe" label="{{trans('meeting.a10299')}}">
                        <template slot-scope="scope">
                            <!-- <el-checkbox v-model="scope.row.is_safe" @change="upSafeStatus(scope.row)"></el-checkbox> -->
                            <template v-if="scope.row.is_safe=='1'">
                                <el-button  type="primary" @click="upSafeStatus(scope.row)" :disabled="role_id==11">{{trans('meeting.shi')}}</el-button>
                            </template>
                            <template v-if="scope.row.is_safe=='2'">
                                <el-button type="info" @click="upSafeStatus(scope.row)" :disabled="role_id==11">{{trans('meeting.fou')}}</el-button>
                            </template>
                        </template>
                    </el-table-column>
                    <el-table-column prop="money" label="{{trans('meeting.a10252')}}（CNY）">
                    </el-table-column>
                </el-table>
            </div>
            <div class="footerhtm">
                <el-button @click="dialogVisible_insurance = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="dialogVisible_insurance = false" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_insurance = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_insurance = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>
        <!-- 注册服务明细  -->
        <ht-modal :title="'{{trans('meeting.a10300')}}'" :visible.sync="dialogVisible_registered" width="50%">
            <div class="dialog">
                <div class="search_registered_data">
                    <el-input class="inputm" clearable v-model="search_registered_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>
                    <el-input class="inputm" clearable v-model="search_registered_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>
                    <el-input class="inputm" clearable v-model="search_registered_data.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>
                    <el-input class="inputm" clearable v-model="search_registered_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>
                    <!-- <el-date-picker v-model="value1" type="date" placeholder="{{trans('meeting.xzrq')}}"> -->
                    <!-- </el-date-picker> -->
                    <el-button  type="primary" @click="creditDetail()" :disabled="role_id==11">{{trans('meeting.sousuo')}}</el-button>
                    <el-button  type="primary" :disabled="role_id==11">{{trans('meeting.fyft')}}</el-button>
                    {{--<span>--}}
                        {{--总计：@{{search_registered_data.total_money}}--}}
                    {{--</span>--}}
                </div>
                <el-table :data="registered_data" border :header-cell-style="tableheaderClassName" style="width: 100%">
                    <el-table-column prop="attendee_code" label="{{trans('meeting.canhuirenbh')}}">
                    </el-table-column>
                    <el-table-column prop="region" label="{{trans('meeting.daqu')}}">
                    </el-table-column>
                    <el-table-column prop="city" label="{{trans('meeting.cs')}}">
                    </el-table-column>
                    <el-table-column prop="name" label="{{trans('meeting.xingming')}}">
                    </el-table-column>
                    <el-table-column prop="sex" label="{{trans('meeting.xingbie')}}">
                    </el-table-column>
                    <el-table-column prop="company" label="{{trans('meeting.yygzdw')}}">
                    </el-table-column>
                    <el-table-column prop="phone" label="{{trans('meeting.shoujihao')}}">
                    </el-table-column>
                    <el-table-column prop="money" label="{{trans('meeting.a10252')}}（CNY）">
                    </el-table-column>
                </el-table>
            </div>
            <div class="footerhtm">
                <el-button @click="dialogVisible_registered = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="dialogVisible_registered = false" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_registered = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_registered = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>
        <!-- 地面交通明细  -->
        <ht-modal :title="'{{trans('meeting.a10301')}}'" :visible.sync="dialogVisible_traffic" width="70%">
            <div class="dialog">
                <div class="search_traffic_data">
                    <el-row >
                        <el-col :span="5" :offset="1">
                            <el-input  clearable v-model="search_traffic_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input  clearable v-model="search_traffic_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input   clearable v-model="search_traffic_data.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>
                        </el-col>
                        <el-col :span="5" :offset="1">
                            <el-input   clearable v-model="search_traffic_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>
                        </el-col>
                    </el-row>
                    <el-row class="mart15">
                        <el-col :span="8" :offset="1">
                            <el-button size="small" type="primary" @click="trafficDetail()" :disabled="role_id==11">{{trans('meeting.sousuo')}}</el-button>
                            <el-button size="small" type="primary" :disabled="role_id==11">{{trans('meeting.fyft')}}</el-button>
                        </el-col>
                        {{--<el-col :span="4" :offset="1">--}}
                        {{--<span class="spantop">--}}
                        {{--总计：@{{search_traffic_data.total_money}}--}}
                    {{--</span>--}}
                        {{--</el-col>--}}
                    </el-row>
                    {{--<el-input class="inputm" clearable v-model="search_traffic_data.name" placeholder="{{trans('meeting.xingming')}}"></el-input>--}}

                    {{--<el-input class="inputm" clearable v-model="search_traffic_data.city" placeholder="{{trans('meeting.cs')}}"></el-input>--}}
                    {{--<el-input  class="inputm" clearable v-model="search_traffic_data.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>--}}
                    {{--<el-input class="inputm"  clearable v-model="search_traffic_data.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>--}}
                    <!-- <el-date-picker v-model="value1" type="date" placeholder="{{trans('meeting.xzrq')}}"> -->
                    <!-- </el-date-picker> -->
                    {{--<el-button size="small" type="primary" @click="trafficDetail()">{{trans('meeting.sousuo')}}</el-button>--}}
                    {{--<el-button size="small" type="primary">{{trans('meeting.fyft')}}</el-button>--}}
                    {{--<span>--}}
                        {{--总计：@{{search_traffic_data.total_money}}--}}
                    {{--</span>--}}
                </div>
                <el-table :data="traffic_data" :header-cell-style="tableheaderClassName" border style="width: 100%">
                    <el-table-column prop="attendee_code" label="{{trans('meeting.canhuirenbh')}}">
                    </el-table-column>
                    <el-table-column prop="region" label="{{trans('meeting.daqu')}}">
                    </el-table-column>
                    <el-table-column prop="city" label="{{trans('meeting.cs')}}">
                    </el-table-column>
                    <el-table-column prop="name" label="{{trans('meeting.xingming')}}">
                    </el-table-column>
                    <el-table-column prop="sex" label="{{trans('meeting.xingbie')}}">
                        <template slot-scope="scope">
                            <span v-show="scope.row.sex==1">{{trans('meeting.nan')}}</span>
                            <span v-show="scope.row.sex==2">{{trans('meeting.nv')}}</span>
                        </template>
                    </el-table-column>
                    <el-table-column prop="company" label="{{trans('meeting.yygzdw')}}">
                    </el-table-column>
                    <el-table-column prop="phone" label="{{trans('meeting.shoujihao')}}">
                    </el-table-column>
                    <el-table-column prop="arrive_day" label="{{trans('meeting.daodariqi')}}">
                    </el-table-column>
                    <el-table-column prop="arrive_time" label="{{trans('meeting.ddsj')}}">
                    </el-table-column>
                    <el-table-column prop="transportation" label="{{trans('meeting.jtfs')}}">
                        <template slot-scope="scope">
                            <template v-if="scope.row.transportation==1">
                                <span>{{trans('meeting.fjswc')}}</span>
                            </template>
                            <template v-if="scope.row.transportation==2">
                                <span>{{trans('meeting.cjcjjjc')}}</span>
                            </template>
                            <template v-if="scope.row.transportation==3">
                                <span>{{trans('meeting.fjjjc')}}</span>
                            </template>
                            <template v-if="scope.row.transportation==4">
                                <span>{{trans('meeting.hczc')}}</span>
                            </template>
                            <template v-if="scope.row.transportation==5">
                                <span>{{trans('meeting.cjzc')}}</span>
                            </template>
                            <template v-if="scope.row.transportation==6">
                                <span>{{trans('meeting.snjt')}}</span>
                            </template>
                            <template v-if="scope.row.transportation==7">
                                <span>{{trans('meeting.ggjt')}}</span>
                            </template>
                            <template v-if="scope.row.transportation==8">
                                <span>{{trans('meeting.qita')}}</span>
                            </template>

                        </template>
                    </el-table-column>
                    <el-table-column prop="flight_number" label="{{trans('meeting.hbhbc')}}">
                    </el-table-column>
                    <el-table-column prop="address" label="{{trans('meeting.a10304')}}">
                    </el-table-column>
                    <el-table-column prop="objective" label="{{trans('meeting.a10305')}}">
                    </el-table-column>
                    <el-table-column prop="car" label="{{trans('meeting.chexing')}}">
                    </el-table-column>
                    <el-table-column prop="type" label="{{trans('meeting.a10306')}}">
                        <template slot-scope="scope">
                            <template v-if="scope.row.type==1">
                                <span>{{trans('meeting.jieji')}}</span>
                            </template>
                            <template v-if="scope.row.type==2">
                                <span>{{trans('meeting.songji')}}</span>
                            </template>
                            <template v-if="scope.row.type==3">
                                <span>{{trans('meeting.sdjj')}}</span>
                            </template>
                            <template v-if="scope.row.type==4">
                                <span>{{trans('meeting.sdsj')}}</span>
                            </template>

                        </template>
                    </el-table-column>
                </el-table>
            </div>

            <div class="footerhtm">
                <el-button @click="dialogVisible_traffic = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="dialogVisible_traffic = false" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_traffic = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_traffic = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>

        {{--旅行社人员费--}}
        <ht-modal :title='nametype' :visible.sync="dialogVisible_lvfree" width="50%">
            <div class="dialog">
                <div class="seach_table">

                    <el-form :model="dialogVisible_lvfreedata" :rules="rulesdialogVisible_lvfree" ref="dialogVisible_lvfreedata" label-width="100px" class="demo-ruleForm">
                        <el-form-item label="类型" prop="type" v-if="dialogVisible_lvfreedata.type==15||dialogVisible_lvfreedata.type==16||dialogVisible_lvfreedata.type==17">
                            <el-col :span="24">
                                <el-select  @visible-change="visibleChange" v-model="dialogVisible_lvfreedata.type" placeholder="请选择活动区域">
                                    <el-option label="旅行社人员费" value="15"></el-option>
                                    <el-option label="其他全陪超时费" value="16"></el-option>
                                    <el-option label="地接超时费" value="17"></el-option>
                                </el-select>
                            </el-col>
                        </el-form-item>
                        <el-form-item label="类型" prop="type" v-if="dialogVisible_lvfreedata.type==1||dialogVisible_lvfreedata.type==2||dialogVisible_lvfreedata.type==3||dialogVisible_lvfreedata.type==4">
                            <el-col :span="24">
                                <el-select  @visible-change="visibleChange" v-model="dialogVisible_lvfreedata.type" placeholder="请选择活动区域">
                                    <el-option label="房间" value="1"></el-option>
                                    <el-option label="会场" value="2"></el-option>
                                    <el-option label="茶歇" value="3"></el-option>
                                    <el-option label="酒店内用餐" value="4"></el-option>
                                </el-select>
                            </el-col>
                        </el-form-item>
                        <el-form-item label="类型" prop="type" v-if="dialogVisible_lvfreedata.type==5||dialogVisible_lvfreedata.type==6||dialogVisible_lvfreedata.type==7||dialogVisible_lvfreedata.type==8">
                            <el-col :span="24">
                                <el-select  @visible-change="visibleChange" v-model="dialogVisible_lvfreedata.type" placeholder="请选择活动区域">
                                    <el-option label="接送用车-单程" value="5"></el-option>
                                    <el-option label="接送用车-往返" value="6"></el-option>
                                    <el-option label="包车" value="7"></el-option>
                                    <el-option label="接送用车超时费" value="8"></el-option>
                                </el-select>
                            </el-col>
                        </el-form-item>
                        <el-form-item label="单价" prop="price">
                            <el-col :span="12">
                                <el-input v-model="dialogVisible_lvfreedata.price" @change="dialogVisibletotal(dialogVisible_lvfreedata)"></el-input>
                            </el-col>
                        </el-form-item>
                        <el-form-item label="数量" prop="number">
                            <el-col :span="12">
                                <el-input v-model="dialogVisible_lvfreedata.number" @change="dialogVisibletotal(dialogVisible_lvfreedata)"></el-input>
                            </el-col>
                        </el-form-item>
                        <el-form-item label="总价" prop="total">
                            <el-col :span="12">
                                <el-input v-model="dialogVisible_lvfreedata.total"></el-input>
                            </el-col>
                        </el-form-item>
                        <el-form-item label="描述" prop="">
                            <el-col :span="12">
                                <el-input type="textarea" v-model="dialogVisible_lvfreedata.describe"></el-input>
                            </el-col>
                        </el-form-item>
                        <el-form-item>
                            <el-col :span="12">
                                <el-button type="primary" @click="dialogVisible_sendmsg('dialogVisible_lvfreedata')" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>

                                <el-button @click="dialogVisible_lvfree = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                            </el-col>

                        </el-form-item>
                    </el-form>

                </div>

            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_real_visa = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_real_visa = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>



        <!-- 费用分摊 -->

        <ht-modal title="{{trans('meeting.fyft')}}" :visible.sync="dialogVisible_shareCenter" width="50%">
            <div>
                <el-row>
                    <el-col :span="24" >
                        <el-button  type="primary" class="bt_css" @click="averageAll()" :disabled="role_id==11">{{trans('meeting.pjfpgsyr')}}</el-button>
                    </el-col>
                    <el-col :span="24" >
                        <el-button  type="primary" class="bt_css" @click="getShareUserList()" :disabled="role_id==11">{{trans('meeting.pjfpgxddr')}}</el-button>
                    </el-col>
                    <el-col :span="24" >
                        <el-button  type="primary" class="bt_css" @click="shareCenter=1" :disabled="role_id==11">{{trans('meeting.fpdcbzx')}}</el-button>
                    </el-col>
                </el-row>

                {{--<el-row>--}}
                {{--<el-col :span="24">--}}
                    {{--<el-button  type="primary" class="bt_css" @click="averageAll()">{{trans('meeting.pjfpgsyr')}}</el-button>--}}
                    {{--</el-col>--}}
                {{--</el-row>--}}
                {{--<el-row>--}}
                {{--<el-col :span="24">--}}
                    {{--<el-button  type="primary" class="bt_css" @click="getShareUserList()">{{trans('meeting.pjfpgxddr')}}</el-button>--}}
                    {{--</el-col>--}}
                {{--</el-row>--}}
                {{--<el-row>--}}
                {{--<el-col :span="24">--}}
                    {{--<el-button  type="primary" class="bt_css" @click="shareCenter=1">{{trans('meeting.fpdcbzx')}}</el-button>--}}
                    {{--</el-col>--}}
                {{--</el-row>--}}
                <div class="dialogSearch">
                    <template v-if="shareCenter==2">
                        <div class="ShareUserListData">
                            <el-col :span="4" style="margin-right: 10px">
                                <el-input  clearable v-model="ShareUserListData.name" placeholder="{{trans('meeting.xingming')}}"></el-input>
                            </el-col>
                            <el-col :span="4" style="margin-right: 10px">
                                <el-input  clearable v-model="ShareUserListData.city" placeholder="{{trans('meeting.cs')}}"></el-input>
                            </el-col>
                            <el-col :span="5" style="margin-right: 10px">
                                <el-input  clearable v-model="ShareUserListData.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>
                            </el-col>
                            <el-col :span="5" style="margin-right: 10px">
                                <el-input  clearable v-model="ShareUserListData.attendee_code" placeholder="{{trans('meeting.canhuirenbh')}}"></el-input>
                            </el-col>
                            <el-col :span="4">
                                <el-button type="primary" @click="getShareUserList(1)" :disabled="role_id==11">{{trans('meeting.sousuo')}}</el-button>
                            </el-col>
                            <!-- <el-col :span="4">
                                <el-button type="primary" @click="averageSelect()">分摊到指定人</el-button>
                            </el-col> -->
                        </div>
                        <el-table :data="ShareUserList" border style="width: 100%" @selection-change="centerhandleSelectionChange"  :header-cell-style="tableheaderClassName">
                            <el-table-column type="selection" width="55">
                            </el-table-column>
                            <el-table-column prop="attendee_code" label="{{trans('meeting.canhuirenbh')}}">
                            </el-table-column>
                            <el-table-column prop="cost_center" label="{{trans('meeting.cbzx')}}">
                            </el-table-column>
                            <el-table-column prop="region" label="{{trans('meeting.daqu')}}">
                            </el-table-column>
                            <el-table-column prop="city" label="{{trans('meeting.cs')}}">
                            </el-table-column>
                            <el-table-column prop="name" label="{{trans('meeting.xingming')}}">
                            </el-table-column>
                            <el-table-column prop="sex_name" label="{{trans('meeting.xingbie')}}">
                            </el-table-column>
                            <el-table-column prop="company" label="{{trans('meeting.yygzdw')}}">
                            </el-table-column>
                            <el-table-column prop="phone" label="{{trans('meeting.shoujihao')}}">
                            </el-table-column>
                            <!-- <el-table-column prop="date" label="选择分摊费用">
                                <template slot-scope="scope">
                                    <template v-if="scope.row.is_ok=='1'">
                                        <el-button  type="primary" @click="visaBlance(scope.row)">是</el-button>
                                    </template>
                                    <template v-if="scope.row.is_ok=='0'">
                                                    <el-button  type="info" @click="visaBlance(scope.row)">否</el-button>
                                            </template>
                                </template>
                            </el-table-column> -->
                        </el-table>

                        <div class="tac">
                            <el-pagination @size-change="ShareUserListhandleSizeChange" @current-change="ShareUserListhandleCurrentChange"    :current-page.sync="ShareUserListData.page" layout="prev, pager, next"
                                           :page-size="ShareUserListData.pagesize" :total="ShareUserListData.total">
                            </el-pagination>
                        </div>


                    </template>
                    <template v-if="shareCenter==1">
                        {{--<div>--}}
                        {{--<el-button type="primary" @click="costCenter()">--}}
                            {{--{{trans('meeting.a10307')}}--}}
                            {{--</el-button>--}}
                        {{--</div>--}}
                        <div class="dialogSearch_bar" v-for="(item,index) in costCenterData.data">
                            <el-col :span="8">
                                <el-input  clearable v-model="item.center_name" @focus="searchcostcentercenter(index)" placeholder="请填写要分摊的成本中心"></el-input>
                            </el-col>
                            <el-col :span="8">
                                <el-input  clearable v-model="item.money" placeholder="{{trans('meeting.a10308')}}"></el-input>
                            </el-col>
                            <el-col :span="8">
                                <el-button type="primary" @click="add()" :disabled="role_id==11">
                                    <span class="el-icon-plus"></span>
                                </el-button>
                                <el-button v-if="costCenterData.data.length != 1" type="primary" @click="remove(item)" :disabled="role_id==11">
                                    <span class="el-icon-minus"></span>
                                </el-button>
                            </el-col>


                        </div>


                    </template>
                </div>
                <div class="tac" v-if="shareCenter==1">
                    <el-button type="primary" @click="costCenter()" :disabled="role_id==11">
                        {{trans('meeting.a10307')}}
                    </el-button>
                </div>
                {{--<div class="footerhtm">--}}
                {{--<el-button @click="dialogVisible_shareCenter = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_shareCenter = false">{{trans('meeting.queding')}}</el-button>--}}
                {{--</div>--}}
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_shareCenter = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_shareCenter = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>

        <!-- 分摊之后的列表 -->
        <ht-modal title="{{trans('meeting.fyft')}}" :visible.sync="dialogVisible_SharePepleList" width="50%">
            <div>
                <el-row>
                    <el-col :span="24">
                        <el-input class="inputm" clearable v-model="SharePepleList.name" placeholder="{{trans('meeting.xingming')}}"></el-input>
                        <el-input class="inputm" clearable v-model="SharePepleList.city" placeholder="{{trans('meeting.cs')}}"></el-input>
                        <el-input class="inputm" clearable v-model="SharePepleList.phone" placeholder="{{trans('meeting.shoujihao')}}"></el-input>
                        <el-button  type="primary" @click="getOneProgramSharePepleList(1)" :disabled="role_id==11">
                            {{trans('meeting.sousuo')}}</el-button>
                    </el-col>
                </el-row>

                <div class="dialogSearch">
                    <el-table :data="SharePepleListData" :header-cell-style="tableheaderClassName" border style="width: 100%">
                        <el-table-column prop="attendee_code" label="{{trans('meeting.canhuirenbh')}}">
                        </el-table-column>
                        {{--
                        <el-table-column prop="region" label="大区">--}} {{--
                        </el-table-column>--}}
                        <el-table-column prop="city" label="{{trans('meeting.cs')}}">
                        </el-table-column>
                        <el-table-column prop="name" label="{{trans('meeting.xingming')}}">
                        </el-table-column>
                        <el-table-column prop="sex" label="{{trans('meeting.xingbie')}}">
                        </el-table-column>
                        <el-table-column prop="company" label="{{trans('meeting.yygzdw')}}">
                        </el-table-column>
                        <el-table-column prop="phone" label="{{trans('meeting.shoujihao')}}">
                        </el-table-column>
                        <el-table-column prop="money" label="{{trans('meeting.fyft')}}">
                        </el-table-column>
                    </el-table>
                    <div style="text-align: center">
                        <el-pagination @size-change="SharePepleListhandleSizeChange" @current-change="SharePepleListhandleCurrentChange"    :current-page.sync="SharePepleList.page" layout="prev, pager, next"
                                       :page-size="SharePepleList.page_size" :total="SharePepleList.total">
                        </el-pagination>
                    </div>
                </div>
            </div>

            {{--<div class="footerhtm">--}}
            {{--<el-button @click="dialogVisible_SharePepleList = false">{{trans('meeting.quxiao')}}</el-button>--}}
            {{--<el-button type="primary" @click="dialogVisible_SharePepleList = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</div>--}}

            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_SharePepleList = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_SharePepleList = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>
        <!-- 分摊中心之后 -->
        <ht-modal title="{{trans('meeting.fyft')}}" :visible.sync="dialogVisible_ShareCenterList" width="50%">
            <div>
                <div class="dialogSearch">
                    <el-table :data="ShareCenterListData" :header-cell-style="tableheaderClassName" border style="width: 100%">
                        <el-table-column prop="center_name" label="{{trans('meeting.cbzx')}}">
                        </el-table-column>
                        <el-table-column prop="money" label="{{trans('meeting.a10311')}}">
                            <template slot-scope="scope">
                                <span>@{{ scope.row.money|currency('CNY',2) }}</span>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
            </div>
            {{--<div class="footerhtm">--}}
            {{--<el-button @click="dialogVisible_ShareCenterList = false">{{trans('meeting.quxiao')}}</el-button>--}}
            {{--<el-button type="primary" @click="dialogVisible_ShareCenterList = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</div>--}}
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_ShareCenterList = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_ShareCenterList = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>
        <!-- TA视角录入发票号 -->
        <ht-modal title="{{trans('meeting.a10312')}}" :visible.sync="dialogVisible_insertTaxNum" width="50%">
            <div>
                <div class="dialogSearch">
                    <p>{{trans('meeting.a10313')}}:</p>
                    <el-input  class="inputm" clearable v-model="service_name" placeholder="{{trans('meeting.a10313')}}"></el-input>
                    <p>{{trans('meeting.a10314')}}:</p>
                    <el-input  class="inputm" clearable v-model="invoice_number" placeholder="{{trans('meeting.a10314')}}"></el-input>
                </div>
            </div>
            <div class="footerhtm">
                <el-button @click="dialogVisible_insertTaxNum = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="insertTaxNum()" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
            </div>
            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_insertTaxNum = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="insertTaxNum()">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>

        <ht-modal title="{{trans('meeting.b10024')}}" :visible.sync="searchcostcenter">
            <el-form @submit.native.prevent  :model="form_costcenter">
                <el-form-item label="">
                    <el-input class="w100" clearable v-model="form_costcenter.cost_name" autocomplete="off"></el-input>
                </el-form-item>
                <el-form-item>
                    <el-button type="primary" @click="seachfn" :disabled="role_id==11">{{trans('meeting.chaxun')}}</el-button>
                </el-form-item>
            </el-form>
            <el-table :data="costarr" border style="width: 100%">
                <el-table-column prop="code" label="{{trans('meeting.b10025')}}">
                </el-table-column>
                <el-table-column prop="company_code" label="{{trans('meeting.b10026')}}">
                </el-table-column>
                <el-table-column prop="name" label="{{trans('meeting.cbzx')}}">
                </el-table-column>
                <el-table-column prop="description" label="{{trans('meeting.miaoshu')}}">
                </el-table-column>
                <el-table-column prop="address" label="{{trans('meeting.caozuo')}}">
                    <template slot-scope="scope">
                        <el-button type="text" size="small" @click="chose_costcenter(scope.row)" :disabled="role_id==11">{{trans('meeting.xuanze')}}</el-button>
                    </template>
                </el-table-column>
            </el-table>
            <div class="tac" v-show="centertotal">
                <el-pagination @size-change="centerhandleSizeChange" @current-change="centerhandleCurrentChange" :current-page.sync="centerpage" layout="prev, pager, next"
                               :page-size="centerpagesize" :total="centertotal">
                </el-pagination>
            </div>

        </ht-modal>


        <!-- 查看差异解释原因 -->
        <ht-modal title="{{trans('meeting.tishi')}}" :visible.sync="dialogVisible_difference" width="50%">
            <div>
                <p class="p_t_b_10 font_20">
                    <span>{{trans('meeting.a10315')}}</span>
                </p>
                <p class="p_t_b_10">
                    <span class="el-icon-warning color_red font_20"></span>
                    <span class="color_red">{{trans('meeting.a10316')}}</span>
                </p>

                <el-input  clearable type="textarea" class="txtareaminheight" v-model="total_remark"  placeholder="请输入原因" v-model="input">
                </el-input>
            </div>
            <div class="footerhtm">
                <el-button @click="dialogVisible_difference = false" :disabled="role_id==11">{{trans('meeting.quxiao')}}</el-button>
                <el-button type="primary" @click="dialogVisible_differencefn" :disabled="role_id==11">{{trans('meeting.queding')}}</el-button>
            </div>

            {{--<span slot="footer" class="dialog-footer">--}}
                {{--<el-button @click="dialogVisible_difference = false">{{trans('meeting.quxiao')}}</el-button>--}}
                {{--<el-button type="primary" @click="dialogVisible_difference = false">{{trans('meeting.queding')}}</el-button>--}}
            {{--</span>--}}
        </ht-modal>
        <!-- 机票费用总表 -->
        <div  id="airtable">
            <el-table ref="multipleTable" v-if="!show_hotel" :data="airList" border tooltip-effect="dark" style="width: 100%" @selection-change="handleSelectionChange"  :header-cell-style="tableheaderClassName" >
                <el-table-column prop="attendee_code" label="attendee_code" width="120">
                </el-table-column>
                <el-table-column prop="invoice_no" label="invoice_no" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="pax" label="pax" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="meeting_name" label="meeting_name" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="po no" label="po_no" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="category_describe" label="class_describe" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="ticket_no" label="ticket_no" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="chinese_name" label="chinese_name" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="airline_code" label="airline_code" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="flight_no" label="flight_no" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="class_code" label="class_code" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="routing_code" label="routing_code" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="routing_in_chinese" label="routing_in_chinese" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="departure_date" label="departure_date" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="arr_date" label="arr_date" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="ticket_iata_fare" label="ticket_iata_fare" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="ticket_published_rate" label="ticket_published_rate" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="ticket_rates" label="票价" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="mgt_trans_fee" label="Mgt/Trans Fee" width="120" show-overflow-tooltip>
                </el-table-column>
                {{--<el-table-column prop="ticket_comm" label="ticket_comm%" width="120" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="ticket_comm_amount" label="ticket_comm_amount" width="120" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="ticket_net_rate" label="ticket_net_rate" width="120" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="mgt_trans_fee" label="mgt_trans_fee" width="120" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                <el-table-column prop="ticket_tax" label="ticket_tax" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="real_sales" label="real_sales" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="bar no" label="ba_no" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="airline_charges" label="airline_charges" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="fuel_surcharge" label="燃油附加费" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="development_fund" label="民航发展基金" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="other_taxes" label="其他税费" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="general_amount" label="普票金额" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="general_amount" label="专票金额" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="e_ticket_amount" label="E-ticket金额" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="item_no" label="item_no" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="ticket_no_show" label="ticket_no" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="net_fair" label="net_fair" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="fee" label="fee" width="120" show-overflow-tooltip>
                </el-table-column>
                <el-table-column prop="invoice_price_all" label="invoice_price_all" width="120" show-overflow-tooltip>
                </el-table-column>
                {{--<el-table-column prop="name" label="{{trans('meeting.xingming')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="sex" label="{{trans('meeting.xingbie')}}" width="120">--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="card_number" label="{{trans('meeting.zhengjianhao')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="phone" label="{{trans('meeting.shoujihao')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="type" label="类别" show-overflow-tooltip>--}}
                {{--<template slot-scope="scope">--}}
                    {{--<span v-if="scope.row.type==1">{{trans('meeting.yisheng')}}</span>--}}
                    {{--<span v-if="scope.row.type==2">{{trans('meeting.a10317')}}</span>--}}
                    {{--<span v-if="scope.row.type==3">{{trans('meeting.qtylwszyrs')}}</span>--}}
                    {{--<span v-if="scope.row.type==4">{{trans('meeting.fylwszyrs')}}</span>--}}
                    {{--<span v-if="scope.row.type==5">{{trans('meeting.bayeryg')}}</span>--}}
                    {{--</template>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="departure_city" label="{{trans('meeting.chufadi')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="departure_date" label="{{trans('meeting.chufariqi')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="departure_time" label="{{trans('meeting.cfsj')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="arrival_city" label="{{trans('meeting.daodadi')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="arrival_time" label="{{trans('meeting.daodashijian')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="flight_number" label="{{trans('meeting.hangbanhao')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="amex_remark" label="{{trans('meeting.amexbz')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
                {{--<el-table-column prop="cost" label="{{trans('meeting.a10252')}}" show-overflow-tooltip>--}}
                {{--</el-table-column>--}}
            </el-table>
        </div>

        <div id="display" >

        </div>
        <div class="page_div" v-show="total!=0">
            <el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage" layout="prev, pager, next"
                           :page-size="pagesize" :total="total">
            </el-pagination>
        </div>
    </div>
</div>

@endsection @section( 'js' )
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.0.272/jspdf.debug.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>
    var vm = new Vue({
        el: '#main',
        data: function () {

            return {
                //权限id
                fullscreenLoading: false, //laoding层控制
                role_id: '',
                //会议id
                event_id: 174,
                type: 2, //分房状态 1直采酒店 2旅行社 3机票
                vender_id: 14681,
                vender_name: '旅行社一',
                identity: 2,

                //报价状态
                getEventTotalSettlementStatusData: {
                    em_check: "0",
                    eo_check: "0",
                    is_has_travel: 1,
                    is_send_eo: "0",
                    ta_check: "0",
                },
                //权限
                show_hotel: true,
                permissions: false, //是否能修改数据
                air_bt: true, //飞机票
                hotel_bt: true, //直采酒店按钮
                share_bt: true, //分摊按钮
                detail_bt: true, //明细按钮
                invoice_bt: false, //发票
                invoice_number: '', //发票号码
                service_name: '', //服务商名称
                total_bt: true, //确认结算
                send_bt: false, //发送EO确认
                send_bt_flg: false, //eo确认按钮

                fullscreenLoading: false, //laoding层控制

                dialogVisible_upload: false, //上传文件弹框

                dialogVisible_custom: false, //自定义
                dialogVisible_car: false, //新增用车
                dialogVisible_registration: false, //新增注册费用
                dialogVisible_visa: false, //新增签证费用
                dialogVisible_insurance: false, //新增保险费用
                dialogVisible_other: false, //新增其他费用
                dialogVisible_printing: false, //新增印刷及制作费用


                dialogVisible_real: false, //实际住宿费用明细
                dialogVisible_real_visa: false, //实际签证费用明细
                dialogVisible_food: false, //实际餐饮用明细
                dialogVisible_insurance: false, //保险明细
                dialogVisible_registered: false, //注册明细
                dialogVisible_traffic: false, //地面交通

                dialogVisible_lvfree:false,//旅行社人员


                dialogVisible_shareCenter: false, //分摊
                dialogVisible_difference: false, //查看差异
                dialogVisible_SharePepleList: false, //分摊到人之后的列表
                dialogVisible_ShareCenterList: false, //分摊中心列表
                dialogVisible_insertTaxNum: false, //发票弹框
                shareCenter: '3', //分摊中心的显示类型 1:分摊中心 2指定 3不显示

                //分页
                total: 0,
                currentPage: 1, //初始页
                pagesize: 20, //    每页的数据

                //总结算数据
                form: {
                    tableData_main: [],
                },

                use_car_table: [],
                use_car_input: '',
                //无用的数据 假数据
                tableData: [],
                input: '',
                value1: '',
//                添加酒店
                addHotelData: {
                    event_id: '',
                    vender_id: '',
                    price: '',
                    num: '',
                    sub: '',
                    project_name: '',
                    date: '',
                },
                //住宿明细
                search_hotel_data: {
                    goods_id: '', //是	int	商品id
                    city: '', //否	string	城市
                    name: '', //否	string
                    sex: '', //否	int	性别 1男 2女
                    attendee_code: '', //否	string	参会人编号
                    hotel_id: '', //否	int	入住酒店id
                    ar_id: '', //否	int	分房状态 0未分房 1分房
                    total: 0,
                    total_money: 0
                },
                hotel_hotel_data: [],

                //签证明细
                search_visa_data: {
                    event_id: '174', //是	int	会议id
                    type: '2', //是	int	列表页的type 1直采酒店 2旅行社
                    project_type: '8', //是	int	列表页的project_type
                    page: 1, //是	int	页码数
                    page_size: 10,
                    name: '',
                    city: '',
                    phone: '',
                    attendee_code: '',
                    total: 0,
                    total_money: 0
                },
                real_visa_data: [],

                //保险明细
                search_insurance_data: {
                    event_id: '', //是	int	会议id
                    type: '', //是	int	列表页的type 1直采酒店 2旅行社
                    project_type: '', //是	int	列表页的project_type
                    page: 1, //是	int	页码数
                    page_size: 10, //否	int	每页条数
                    real_unti_price: '', //是	str	列表页的real_unti_price 实际单价
                    name: '',
                    city: '',
                    phone: '',
                    attendee_code: '',
                    total: 0,
                    total_money: 0
                },
                insurance_data: [],

                //注册明细
                search_registered_data: {
                    event_id: '', //是	int	会议id
                    type: '', //是	int	列表页的type 1直采酒店 2旅行社
                    project_type: '', //是	int	列表页的project_type
                    real_unti_price: '', //是	int	列表页的real_unti_price 实际单价
                    page: 1, //是	int	页码数
                    page_size: 10, //是	int	条数
                    name: '',
                    city: '',
                    phone: '',
                    attendee_code: '',
                    total: 0,
                    total_money: 0
                },
                registered_data: [],

                //餐饮明细
                search_food_head_data: {
                    event_id: '', //|是 |int |会议id |
                    am_pm: '1', //|是 |int | 1早餐 2午餐 3晚餐 |
                    type: '', //|是 |int | 1酒店 2旅行社 |
                    vender_id: '', //|是 |int | 酒店或旅行社id |
                    goods_id: '',
                    page: 1, //|是 |int | 页码 |
                    page_size: 10, //|是 |int | 每页数量 |
                    total: 0,
                    total_money: 0
                },
                food_head_data: [],
                food_body_data: [],

                //地面交通
                search_traffic_data: {
                    goods_id: '', //是	int	商品id
                    page: 1,
                    page_size: 10, //|是 |int | 每页数量 |
                    total: 0,
                    total_money: 0,
                    name: '',
                    city: '',
                    phone: '',
                    attendee_code: '',
                },
                traffic_data: [],

                //分摊给指定的值
                ShareUserListData: {
                    event_id: '', //是	int	会议id
                    type: '', //是	int	1直采酒店 2旅行社
                    goods_id: '', //是	int	主列表页goods_id
                    project_type: '', //是	int
                    page: 1, //是	int	页码数
                    name: '', //否	str	姓名搜索
                    city: '', //否	str	城市搜索
                    phone: '', //否	str	手机搜索
                    attendee_code: '', //否	str	参会人编码搜索
                    page_size: 10, //|是 |int | 每页数量 |
                    total: 0,
                },
                ShareUserList: [{
                    attendee_code: "1",
                    attendee_id: "146",
                    city: "石家庄",
                    company: "拜耳公司",
                    cost_center: "",
                    name: "杜晓莉",
                    phone: "18210521089",
                    region: "2",
                    sex: "2",
                }],
                share_id: '',
                share_vender_id: '',
                multipleSelection: [], //分摊人的id列表
                total_price: '', //需要分摊的总价

                //分摊到所有人
                averageAllData: {
                    event_id: '', //是	int	会议id
                    type: '', //是	int	1直采酒店 2旅行社
                    goods_id: '', //是	int	主列表页goods_id
                    goods_type: '', //是	int	项目类别project_type
                    total_price: '',
                    vender_id: '',
                    id: ''
                },

                //分摊中心
                costCenterData: {
                    event_id: '', //是	int	会议id
                    type: '', //是	int	1直采酒店 2旅行社
                    goods_id: '', //是	int	主列表页goods_id
                    project_type: '', //是	int	项目类别project_type
                    vender_id: '',
                    id: '',
                    data: [{
                        center_name: '',
                        money: ''
                    }],
                },

                //制定到人
                SharePepleList: {
                    event_id: '', //是	int	会议id
                    goods_id: '', //是	int	主列表页goods_id
                    page: '1', //是	int	页码数
                    page_size: '10', //是	int	条数
                    total:0,
                    name: '', //否	str	姓名搜索
                    city: '', //否	str	城市搜索
                    phone: '', //否	str	手机搜索
                    attendee_code: '', //否	str	参会人编码搜索
                },
                SharePepleListData: [],
                ShareCenterListData: [],

                //飞机票
                airData: {
                    event_id: '', //是	int	会议id
                    page: 1, //是	int	当前页
                    page_size: 10 //否	int	每页显示条数
                },
                airList: [],
                addHotelData_rules: {
                    required_ele: [{
                        required: true,
                        message: '必填信息',
                        trigger: 'blur'
                    }],
                },

                //上传文件列表数据
                upload_data: {
                    event_id: '',
                    vender_id: '',
                    type: '',
                    data: [{
                        url: '',
                        name: '',
                        project_type: '',
                    }, ],
                },
                upload_type: '1', //上传文件列表的 前面的project_type值取出来
                upload_index: 0,   //上传文件列表的 index行数

                dialogVisible_lvfreedata:{
                    type:'',
                    number:'',
                    total:'',
                    price:'',
                    describe:'',
                },//旅行社人员分类表单
                nametype:'',
                searchcostcenter:false,
                form_costcenter: {
                    cost_name: ''
                },
                costarr:[],//成本中心数组
                searchcostcenterindex:'',
                centerpage: 1,
                centercurrentPage: 1, //初始页
                centerpagesize: 10, //个数
                centertotal:'',
                isreturn:true,
                rulesdialogVisible_lvfree: {
                    describe: [
                        { required: true, message: '请输入描述', trigger: 'blur' },
                    ],
                    number: [
                        { required: true, message: '请填写数量', trigger: 'blur' },
                        { pattern:/^[1-9]\d*$/, message: '请输入正确数量' }
                    ],
                    total: [
                        {  required: true, message: '请填写总价', trigger: 'blur' },
                        { pattern:　/^[+]{0,1}(\d+)$|^[+]{0,1}(\d+\.\d+)$/, message: '请输入正确总价' }

                    ],
                    price: [
                        {  required: true, message: '请填写单价', trigger: 'blur' },
                        { pattern:　/^[+]{0,1}(\d+)$|^[+]{0,1}(\d+\.\d+)$/, message: '请输入正确价格' }

                    ],
                    type: [
                        { required: true, message: '请至少选择一个类型', trigger: 'blur' }
                    ]
                },
                //实际餐饮明细的分页
                foodtotal:0,
                foodpagesize:10,
                foodpage:1,
                foodcurrentPage:1,
                sumradio:'2',
                total_remark:'',
                targetscope:'',
                newPriceListpo:'',
                newPriceListname:'',
                selsettotalarr:[],
                airpppss:{page_upload:1},
                airfileList:[],



            };
        },
        created: function () {
            // this.getuserinfo()
            //     document.getElementById('main').style.display = 'block';
            // document.getElementById('appLoading').style.display = 'none';
            this.event_id = this.getQueryString('id')
            this.role_id = this.getQueryString('role_id')
            this.airpppss.event_id= this.getQueryString('id')
            this.getEventTotalSettlementStatus()
            this.tlist()
//            this.getGoodsList()

        },
        methods: {
//            calcRows:function(text) {
//
//                if (!text) return 2
//                return text.length/10
//            },
            beforeupload:function () {
                this.fullscreenLoading=true
            },
            file_success: function (response, file, fileList) {
                var that=this
                if(response.code==1){
                    that.$alert(response.msg,'{{trans('meeting.xxts')}}',{
                        confirmButtonText: '{{trans('meeting.queding')}}',
                        callback:function(action){
                        that.air_fare()
                    }
                })
                }else{
                    that.$alert(response.msg,'{{trans('meeting.xxts')}}',{
                        confirmButtonText: '{{trans('meeting.queding')}}',
                        callback:function(action){
                        that.fullscreenLoading=false

                    }
                })
                }



            },//上传成功回调
            file_error: function (response, file, fileList) {
                var that=this

                that.$alert('模版类型错误','{{trans('meeting.xxts')}}',{
                    confirmButtonText: '{{trans('meeting.queding')}}',
                    callback:function(action){
                    that.fullscreenLoading=false

                }
            })


            },//上传失败回调


            SharePepleListhandleSizeChange: function (size) {
                this.SharePepleList.page = size;
                this.getOneProgramSharePepleList() //每页下拉显示数据
            },
            SharePepleListhandleCurrentChange: function (currentPage) {
                this.SharePepleList.page = currentPage;
                this.getOneProgramSharePepleList() //点击第几页
            },
            newPriceListchange:function (item,type) {

                var that = this

                var data = {
                    event_id:that.event_id,
                    po_no :'',
                    name :'',
                }
                if(type==1){
                    data.po_no=item.basic.PO_No
                }else if(type==2){
                    data.name=item.basic.applicant_name
                }
                if(!data.po_no&&!data.name){
                    return
                }

                that.fullscreenLoading=true
                axios.post('/total/updateApplicantNameAndPONo',data)
                    .then(function (response) {
                        if (response.data.code == "1") {
                            that.fullscreenLoading = false //laoding层控制
                            that.tlist(that.type)
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {});


            },
            dialogVisible_differencefn:function () {
                this.dialogVisible_difference=false
                this.targetscope.total_remark = this.total_remark

            },
            print_qr:function () {

                if(this.sumradio!=3){

                    var height = $("#table").height()
                    //克隆节点，默认为false，不复制方法属性，为true是全部复制。
                    var cloneDom = $("#table").clone(true);
                    //设置克隆节点的css属性，因为之前的层级为0，我们只需要比被克隆的节点层级低即可。
                    cloneDom.css({
                        "background-color": "white",
                        "position": "absolute",
                        "top": "0px",
                        "z-index": "-1",
                        "height": height,
                    });
                    //将克隆节点动态追加到body后面。
                    $("#display").append(cloneDom);
                    //插件生成base64img图片。
                }else{

                    var height = $("#airtable").height()



                    //克隆节点，默认为false，不复制方法属性，为true是全部复制。
                    var cloneDom = $("#airtable").clone(true);
                    //设置克隆节点的css属性，因为之前的层级为0，我们只需要比被克隆的节点层级低即可。
                    cloneDom.css({
                        "background-color": "white",
                        "position": "absolute",
                        "top": "0px",
                        "z-index": "-1",
                        "height": height,


                    });
                    //将克隆节点动态追加到body后面。
                    $("#display").append(cloneDom);
                    //插件生成base64img图片。
                }
                html2canvas(cloneDom, {
                    //Whether to allow cross-origin images to taint the canvas
                    allowTaint: true,
                    //Whether to test each image if it taints the canvas before drawing them
                    taintTest: false,
                    onrendered:function(canvas) {
                        var contentWidth = canvas.width;
                        var contentHeight = canvas.height;
                        //一页pdf显示html页面生成的canvas高度;
                        var pageHeight = contentWidth / 592.28 * 841.89;
                        //未生成pdf的html页面高度
                        var leftHeight = contentHeight;
                        //页面偏移
                        var position = 0;
                        //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高
                        var imgWidth = 595.28;
                        var imgHeight = 592.28/contentWidth * contentHeight;
                        var pageData = canvas.toDataURL('image/jpeg', 1.0);
                        var pdf = new jsPDF('', 'pt', 'a4');
                        //有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)
                        //当内容未超过pdf一页显示的范围，无需分页

                        if (leftHeight < pageHeight) {
                            pdf.addImage(pageData, 'JPEG', 0, 0, imgWidth, imgHeight );
                        } else {
                            while(leftHeight > 0) {
                                pdf.addImage(pageData, 'JPEG', 0, position, imgWidth, imgHeight)
                                leftHeight -= pageHeight;
                                position -= 841.89;
                                //避免添加空白页
                                if(leftHeight > 0) {
                                    pdf.addPage();
                                }
                            }
                        }
                        pdf.save('content.pdf');
//                        location.reload()
                    }

                });





                return

                var targetDom = $("#table");
                var copyDom = targetDom.clone();
                copyDom.width(targetDom.width() + "px");
                copyDom.height(targetDom.height() + "px");
                $('body').append(copyDom);

                html2canvas(copyDom, {
                    allowTaint: true,
                    taintTest: false,
                    onrendered:function(canvas) {
                        var contentWidth = canvas.width;
                        var contentHeight = canvas.height;
                        //一页pdf显示html页面生成的canvas高度;
                        var pageHeight = contentWidth / 592.28 * 841.89;
                        //未生成pdf的html页面高度
                        var leftHeight = contentHeight;
                        //页面偏移
                        var position = 0;
                        //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高
                        var imgWidth = 595.28;
                        var imgHeight = 592.28/contentWidth * contentHeight;
                        var pageData = canvas.toDataURL('image/jpeg', 1.0);
                        var pdf = new jsPDF('', 'pt', 'a4');
                        //有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)
                        //当内容未超过pdf一页显示的范围，无需分页

                        if (leftHeight < pageHeight) {
                            pdf.addImage(pageData, 'JPEG', 0, 0, imgWidth, imgHeight );
                        } else {
                            while(leftHeight > 0) {
                                pdf.addImage(pageData, 'JPEG', 0, position, imgWidth, imgHeight)
                                leftHeight -= pageHeight;
                                position -= 841.89;
                                //避免添加空白页
                                if(leftHeight > 0) {
                                    pdf.addPage();
                                }
                            }
                        }
                        pdf.save('content.pdf');
                    }
                });

                var dom = document.getElementById('table')
                html2canvas(dom, {
                    type: 'view',
//                    height: $('#u_content').outerHeight() + 2000,
                    onrendered:function(canvas) {
                        var contentWidth = canvas.width;
                        var contentHeight = canvas.height;
                        //一页pdf显示html页面生成的canvas高度;
                        var pageHeight = contentWidth / 592.28 * 841.89;
                        //未生成pdf的html页面高度
                        var leftHeight = contentHeight;
                        //页面偏移
                        var position = 0;
                        //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高
                        var imgWidth = 595.28;
                        var imgHeight = 592.28/contentWidth * contentHeight;
                        var pageData = canvas.toDataURL('image/jpeg', 1.0);
                        var pdf = new jsPDF('', 'pt', 'a4');
                        //有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)
                        //当内容未超过pdf一页显示的范围，无需分页

                        if (leftHeight < pageHeight) {
                            pdf.addImage(pageData, 'JPEG', 0, 0, imgWidth, imgHeight );
                        } else {
                            while(leftHeight > 0) {
                                pdf.addImage(pageData, 'JPEG', 0, position, imgWidth, imgHeight)
                                leftHeight -= pageHeight;
                                position -= 841.89;
                                //避免添加空白页
                                if(leftHeight > 0) {
                                    pdf.addPage();
                                }
                            }
                        }
                        pdf.save('content.pdf');
                    }
                })

            },
            foodhandleSizeChange: function () {
                this.foodpage = size;
                this.resDetailed(this.mxitem) //每页下拉显示数据
            },  //住宿分页函数
            foodhandleCurrentChange: function(currentPage){
                this.foodpage = currentPage;
                this.resDetailed()  //点击第几页
            },
            realdiffmoney:function (row) {
                row.real_sub_total=row.real_num*row.real_unti_price

                row.diff_num=row.real_sub_total-row.order_sub_total.split(',').join("")*1


            },//计算差额
            ShareUserListhandleSizeChange: function (size) {
                this.ShareUserListData.page = size;
                this.getShareUserList()

            },
            ShareUserListhandleCurrentChange: function (currentPage) {
                this.ShareUserListData.page = currentPage;
                this.getShareUserList(2)


            },//平均分配分页
            centerhandleSizeChange: function (size) {
                this.centerpage = size;
                this.seach_costcenter() //每页下拉显示数据
            },
            centerhandleCurrentChange: function (currentPage) {
                this.centerpage = currentPage;
                this.seach_costcenter() //点击第几页
            },
            searchcostcentercenter:function (index) {
                this.searchcostcenter = true
                this.searchcostcenterindex=index

            },
            chose_costcenter:function (msg) {
                this.costCenterData.data[this.searchcostcenterindex].center_name=msg.name
                this.searchcostcenter=false
                this.form_costcenter.cost_name=''
                this.costarr=[]
                this.centertotal=''
                this.centerpage=1

            },//选择成本中心
            seachfn:function () {
                this.seach_costcenter(1)
            },
            seach_costcenter:function (type) {
                var that = this
                var data = that.form_costcenter;
                data.page_size=that.centerpagesize
                data.page=that.centerpage
                if(type){
                    data.page=type
                }
                that.costarr=[]
                that.fullscreenLoading=true
                axios.post('/myMeeting/costCenter',data)
                    .then(function (response) {
                        if (response.data.code == "1") {
                            that.fullscreenLoading = false //laoding层控制
                            that.costarr=response.data.data.data
                            that.centertotal=response.data.data.total
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {});

            },//搜索成本中心

            upPriceOrNumfree:function (row) {

                var that = this
                var  data = {
                    event_id:that.event_id,
                    data:[{
                        is_out_package:row.is_out_package,
                        service_name:row.service_name,
                        invoice_number:row.invoice_number,
                        real_unti_price:row.real_unti_price,
                        real_num:row.real_num,
                        add_tax_money:row.add_tax_money,
                        is_special:row.is_special,
                        total_remark:row.total_remark,
                        id:row.id,
                        diff_num:row.diff_num,
                        real_sub_total:row.real_sub_total,
                        total_remark:row.total_remark
                    }]
                }
//                data.data.push(row)


                that.fullscreenLoading = true //laoding层控制

                axios.post('/total/updateTotalSettlementByHotel', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.$alert('{{trans('meeting.tjcg')}}', '{{trans('meeting.xxts')}}', {
                                confirmButtonText: '{{trans('meeting.queding')}}',
                                callback:function(){
                                that.tlist(that.type)
//                                    location.reload()
                            }
                        });

                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert(res.data.msg, '{{trans('meeting.xxts')}}', {
                                confirmButtonText: '{{trans('meeting.queding')}}',
                                callback:function(){
//                                    location.reload()
                            }
                        });
                        }
                    })
                    .catch(function (error) {

                    });


            },
            nametypefn:function () {

                return '1'

            },//标题
            dialogVisibletotal:function (data) {
                if(data.number&&data.price){
                    data.total=data.number*data.price
                }
            },
            dialogVisible_sendmsg:function (formName) {
                var that = this;
                that.$refs[formName].validate(function (valid) {
                    if (valid) {

                        var data=that[formName]
                        data.type_one='2'
                        data.event_id=that.event_id
                        data.vender_id=that.vender_id
                        that.fullscreenLoading = true //laoding层控制

                        axios.post('/total/addTypeCost', data)
                            .then(function (res) {
                                if (res.data.code == 1) {
                                    that.$alert('{{trans('meeting.tianjcg')}}', '{{trans('meeting.xxts')}}', {
                                        confirmButtonText: '{{trans('meeting.queding')}}',
                                        callback:function(){
                                        location.reload()
                                    }
                                });

                                } else {
                                    that.fullscreenLoading = false //laoding层控制
                                    that.$alert(res.data.msg, '{{trans('meeting.xxts')}}', {
                                        confirmButtonText: '{{trans('meeting.queding')}}',
                                        callback:function(){
                                        location.reload()
                                    }
                                });
                                }
                            })
                            .catch(function (error) {

                            });

                    } else {
                        that.$alert('{{trans('meeting.xxwayqtx')}}', '{{trans('meeting.xxts')}}', {
                            confirmButtonText: '{{trans('meeting.queding')}}',
                            callback:function(){

                        }
                    });

                    }
                });
            },
            hanlddialogVisible:function (type) {
                var that = this
                if(this.$refs.dialogVisible_lvfreedata){
                    this.$refs.dialogVisible_lvfreedata.resetFields();
                }
                this.dialogVisible_lvfreedata.type=type+''

                if(type==1){
                    that.nametype="{!!trans('meeting.a10281')!!}"
                }else if(type==5){
                    that.nametype="{!!trans('meeting.yongche')!!}"
                }else if(type==10){
                    that.nametype="{!!trans('meeting.baoxianfei')!!}"
                }else if(type==11){
                    that.nametype="{!!trans('meeting.a10282')!!}"
                }else if(type==12){
                    that.nametype="{!!trans('meeting.jiandanysjzz')!!}"
                }else if(type==13){
                    that.nametype="{!!trans('meeting.zhucefei')!!}"
                }else if(type==14){
                    that.nametype="{!!trans('meeting.qita')!!}"
                }else if(type==15){
                    that.nametype="{!!trans('meeting.lxsrys')!!}"
                }

                this.dialogVisible_lvfree=true

//                this.dialogVisible_lvfreedata.describe=''
//                this.dialogVisible_lvfreedata.total=''
//                this.dialogVisible_lvfreedata.number=''
//                this.dialogVisible_lvfreedata.price=''

            },

            getGoodsList:function (type) {
                var that = this
                var data={
                    type: that.type
                }
                axios.post('/total/getAddType', data)
                    .then(function (res) {
                        if (res.data.code == 1) {

                        } else {
                            that.fullscreenLoading = false //laoding层控制

                        }
                    })
                    .catch(function (error) {

                    });
            },
            tableheaderClassName:function (row) {
                return {'background':'rgba(241,248,255,1)','color':'rgba(28,100,182,1)', 'fontSize': '16px','font-weight':'400'}
            },
            formattype: function (row, column, cellValue) {
                var _this = this;

                if (_this.type == 2) {
                    if (cellValue == 1) {
                        return '{{trans('meeting.a10094')}}'
                    } else if (cellValue == 2) {
                        return '{{trans('meeting.a10095')}}'
                    } else if (cellValue == 3) {
                        return '{{trans('meeting.a10096')}}'
                    } else if (cellValue == 4) {
                        return '{{trans('meeting.canyin')}}'
                    } else if (cellValue == 5) {
                        return '{{trans('meeting.dmjt')}}'
                    } else if (cellValue == 6) {
                        return '{{trans('meeting.a10097')}}'
                    } else if (cellValue == 7) {
                        return '{{trans('meeting.a10098')}}'
                    } else if (cellValue == 8) {
                        return '{{trans('meeting.qianzheng')}}'
                    } else if (cellValue == 9) {
                        return '{{trans('meeting.baoxian')}}'
                    } else if (cellValue == 10) {
                        return '{{trans('meeting.a10260')}}'
                    } else if (cellValue == 11) {
                        return '{{trans('meeting.jiandanysjzz')}}'
                    }
                } else {
                    if (cellValue == 1) {
                        return '{{trans('meeting.hys')}}'
                    } else if (cellValue == 2) {
                        return '{{trans('meeting.chaxie')}}'
                    } else if (cellValue == 3) {
                        return '{{trans('meeting.jdzs')}}'
                    } else if (cellValue == 4) {
                        return '{{trans('meeting.canyin')}}'
                    } else if (cellValue == 5) {
                        return '{{trans('meeting.hyb')}}'
                    } else if (cellValue == 6) {
                        return '{{trans('meeting.sheshi')}}'
                    } else if (cellValue == 7) {
                        return '{{trans('meeting.qita')}}'
                    }
                }


            },
            //判断类型函数（旅行社）
            reload_fn: function () {
                window.location.reload();
            },
            //成功 失败的调用
            success: function (msg) {
                this.$message({
                    showClose: true,
                    message:msg,
                    type: 'success',
                    customClass: 'postion_class',
                });
                this.fullscreenLoading = false; //laoding层控制
            },
            error: function (msg) {
                this.$message({
                    showClose: true,
                    message:msg,
                    type: 'error',
                    customClass: 'postion_class',
                });
                this.fullscreenLoading = false; //laoding层控制
            },
            //分页
            handleSizeChange: function (size) {
                this.formInline.page = size;
                this.getMeetingData() //每页下拉显示数据
            },
            handleCurrentChange: function (currentPage) {
                this.formInline.page = currentPage;
                this.getMeetingData() //点击第几页
            },
            //勾选表格
            handleSelectionChange: function (val) {
                this.multipleSelection = val;
            },
            //下拉菜单 回调
            handleCommand: function (command) {
                this[command] = true;
            },
            //删除
            remove: function (item) {
                var index = this.costCenterData.data.indexOf(item)
                if (index !== -1) {
                    this.costCenterData.data.splice(index, 1)
                }
            },
            //添加
            add: function () {
                this.costCenterData.data.push({
                    center_name: '',
                    money: ''
                })
            },
            //成本中心费用分摊明细
            costShare: function (row) {
                this.dialogVisible_ShareCenterList = true
                var that = this;
                var data = {
                    goods_id: row.goods_id, //是	int	会议ID
                };
                that.fullscreenLoading = true; //laoding层控制
                axios.post('/total/costShare', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false; //laoding层控制
                            that.ShareCenterListData = res.data.msg
                            // that.$alert('请求成功');
                        } else {
                            that.fullscreenLoading = false //laoding层控制

                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //分摊后---获取人员分摊列表
            openSharePepleList: function (row) {
                this.SharePepleList.page=1
                this.SharePepleList.total=0
                this.dialogVisible_SharePepleList = true
                this.SharePepleList.event_id = row.event_id
                this.SharePepleList.goods_id = row.goods_id
                this.getOneProgramSharePepleList()
            },
            getOneProgramSharePepleList: function (type) {
                var that = this;
                var data = that.SharePepleList;

                if(type==1){
                    data.page=1
                }

                that.fullscreenLoading = true; //laoding层控制
                axios.post('/total/getOneProgramSharePepleList', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false; //laoding层控制
                            that.SharePepleListData = res.data.msg.data
                            that.SharePepleList.total=res.data.msg.total
                            // that.$alert('请求成功');
                        } else {
                            that.fullscreenLoading = false //laoding层控制

                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //新增酒店小计
            sub_num: function () {
                if (!isNaN(this.addHotelData.price) && !isNaN(this.addHotelData.num)) {
                    this.addHotelData.sub = this.addHotelData.price * this.addHotelData.num;
                }

            },
            //旅行社数据 跟 直采酒店数据 切换 直采 1 旅行社 2
            change_type: function (type) {
                this.show_hotel = true;
                this.type = type;
                this.sumradio=type;
                this.tlist();
//                this.getGoodsList()
            },
            //总结算列表
            tlist: function (type) {
                var that = this;
                var data = {
                    event_id: that.event_id, //是	int	会议ID
                    type: that.type, //分房状态 1直采酒店 2旅行社
                };
                if(type){
                    data.type=type
                }
                that.fullscreenLoading = true; //laoding层控制
                axios.post('/total/tlist', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false; //laoding层控制

                            if (res.data.msg != 'empty' && res.data.msg.length > 0) {
                                that.form.tableData_main = res.data.msg
                                that.vender_id = res.data.msg[0].vender_id
                                that.form.tableData_main.forEach(function (item, index) {
                                    item.data.forEach(function (item, index) {
                                        item.is_out_package = item.is_out_package + ''
                                        item.is_special = item.is_special + ''

                                    })
                                })
                            } else {
                                that.form.tableData_main = []
                            }


                        } else {
                            that.fullscreenLoading = false //laoding层控制

                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //新增用车搜索
            // event_id	是	int	会议ID
            // keyword	是	str	搜索词
            searchUser: function () {
                var that = this;
                var data = {
                    event_id: that.event_id,
                    keyword: that.use_car_input
                };
                that.fullscreenLoading = true; //laoding层控制
                axios.post('/total/searchUser', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            use_car_table = res.data.msg[0].data
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //新增自定义酒店
            addHotle: function () {
                var that = this;
                this.$refs["add_hotel_ref"].validate(function (valid) {
                    if (valid) {

                        var data = JSON.parse(JSON.stringify(this.addHotelData))
                        data.event_id = that.event_id
                        data.vender_id = that.vender_id
                        that.fullscreenLoading = true //laoding层控制
                        axios.post('/total/addHotle', data)
                            .then(function (res) {
                                if (res.data.code == 1) {
                                    that.$alert('{{trans('meeting.tianjcg')}}');
                                    that.fullscreenLoading = false //laoding层控制
                                    that.dialogVisible_custom = false
                                } else {
                                    that.$alert(res.data.msg)
                                }
                            })
                            .catch(function (error) {
                                that.fullscreenLoading = false //laoding层控制
                                that.$alert('{{trans('meeting.sjqqsb')}}');
                            });
                    } else {
                        that.fullscreenLoading = false //laoding层控制
                        var a=document.getElementsByClassName('is-error')
                        that.$alert('{{trans('meeting.xxwayqtx')}}', '{{trans('meeting.xxts')}}', {
                            confirmButtonText: '{{trans('meeting.queding')}}',
                            callback:function(){
                            var c= setTimeout(function () {
                                if(a.length!=0){
                                    console.log(a[0].getBoundingClientRect().top+( window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0))
                                    window.scrollTo(0,a[0].getBoundingClientRect().top+( window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0)-30)
                                }
                            },500)
                        }
                    });

                        return false;
                    }
                });


            },
            //修改酒店自定，其他，印刷单价和数量
            upPriceOrNum: function () {
                var that = this;
                var data = {
                    id: "", //是	int	列表页的id
                    project_type: "", //是	int	列表页的project_type
                    up_type: "", //是	int	1是修改单价 2是修改数量
                    real_sub_total: "", //是	int	最新数量*最新单价
                    real_unti_price: "", //否	str	要修改的实际单价 up_type=1时必填
                    real_num: "", //否	str	要修改的实际数量 up_type=2时必填
                }
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/upPriceOrNum', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.$message({
                                showClose: true,
                                message:'{{trans('meeting.a10318')}}',
                                type: 'success',
                                customClass: 'postion_class',
                        });
                            that.reload_fn()
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.sjqqsb')}}');
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //餐饮明细
            resDetailed: function () {
                var that = this;
                var data = that.search_food_head_data;
                data.type=that.type
                data.page=that.foodpage

                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/resDetailed', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.food_head_data = res.data.msg.compute_data;
                            that.food_body_data = res.data.msg.data;
                            that.foodtotal=res.data.msg.total

                            // that.$alert('请求餐饮数据成功');
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.sjqqsb')}}');
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //注册服务明细
            creditDetail: function () {
                var that = this;
                var data = that.search_registered_data;

                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/creditDetail', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.registered_data = res.data.msg.data;
                            // that.$alert('请求注册数据成功');
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.sjqqsb')}}');
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //保险明细
            safeDetail: function () {
                var that = this;
                var data = that.search_insurance_data;
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/safeDetail', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.insurance_data = res.data.msg.data;
                            // that.$alert('请求注册数据成功');
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.sjqqsb')}}');
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //总住宿明细
            stayDetailed: function () {
                var that = this;
                var data = that.search_hotel_data;
                data.event_id=that.event_id
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/stayDetailed', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            if (res.data.msg == 'empty') {
                                that.hotel_hotel_data = []
                                that.fullscreenLoading = false //laoding层控制
                            } else {
                                that.fullscreenLoading = false //laoding层控制
                                that.hotel_hotel_data = res.data.msg;
                            }

                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //签证明细
            visaList: function () {
                var that = this;
                var data = that.search_visa_data;
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/visaList', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.real_visa_data = res.data.msg.data;
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //地面交通
            trafficDetail: function (type, ptype) {
                var that = this;
                var data = that.search_traffic_data;
                that.fullscreenLoading = true; //laoding层控制
                axios.post('/total/trafficDetail', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.traffic_data = res.data.msg.data;

                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //更改是否使用保险
            upSafeStatus: function (row) {
                if (row.is_safe == '1') {
                    row.is_safe = '2'
                } else {
                    row.is_safe = '1'
                }
                var that = this;
                var data = {
                    event_id: that.search_insurance_data.event_id, //是	int	会议id
                    is_safe: row.is_safe, //是	int	是否保险 1是 2不是
                    attendee_id: row.attendee_id, //是	int	参会人id
                }
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/upSafeStatus', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.xgcg')}}')
                            that.safeDetail()
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //更改签证费用
            upVisaMoney: function (row) {
                var that = this;
                var data = {
                    event_id: that.search_visa_data.event_id, //是	int	会议id
                    money: row.money, //是	str	费用
                    attendee_id: row.attendee_id //是	int	参会人id
                }
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/upVisaMoney', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.xgcg')}}')
                            that.visaList()

                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //提前结算/取消结算
            visaBlance: function (row) {
                if (row.is_ok == '1') {
                    row.is_ok = '0'
                } else {
                    row.is_ok = '1'
                    var time = moment().format("YYYY-MM-DD HH:mm:ss");
                    row.ok_time = time;
                }
                var that = this;
                var data = {
                    event_id: that.search_visa_data.event_id, //	是	int	会议id
                    type: row.is_ok, //	是	int	1 提前结算 0取消结算
                    attendee_id: row.attendee_id, //  是	int	参会人id
                    date: row.ok_time //否	date	结算时间type=1时 必填
                }
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/visaBlance', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.visaList()
                            that.$alert('{{trans('meeting.xgcg')}}')
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            openShareUserList: function (row) {

                var that = this;
                that.shareCenter = '3'
                that.ShareUserList=[]
                that.ShareUserListData.name=''
                that.ShareUserListData.city=''
                that.ShareUserListData.phone=''
                that.ShareUserListData.attendee_code=''
                that.ShareUserListData.page='1'
                that.ShareUserListData.total=''
                that.costCenterData.data = [{
                    center_name: '',
                    money: ''
                }];
                that.dialogVisible_shareCenter = true;
                that.ShareUserListData.event_id = row.event_id;
                that.ShareUserListData.type = row.type;
                that.ShareUserListData.goods_id = row.goods_id;
                that.ShareUserListData.project_type = row.project_type;
                that.total_price = row.real_sub_total;
                that.share_id = row.id;
                that.share_vender_id = row.vender_id;
                that.averageAllData.event_id = row.event_id
                that.averageAllData.type = row.type
                that.averageAllData.goods_id = row.goods_id
                that.averageAllData.goods_type = row.project_type
                that.averageAllData.vender_id = row.vender_id
                that.averageAllData.id = row.id
                that.averageAllData.total_price = row.real_sub_total
                that.costCenterData.event_id = row.event_id
                that.costCenterData.type = row.type
                that.costCenterData.goods_id = row.goods_id
                that.costCenterData.goods_type = row.project_type
                that.costCenterData.vender_id = row.vender_id
                that.costCenterData.id = row.id
                that.costCenterData.project_type = row.project_type

            },
            //分摊到指定人时获取用户列表
            getShareUserList: function (type) {

                var that = this;
                var data = that.ShareUserListData;
                if (that.shareCenter == '2'&&!type) {
                    that.averageSelect()
                    return
                }
                that.shareCenter = '2'
                if(type==1){
                    data.page=1
                }

                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/getShareUserList', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.ShareUserList = res.data.msg.data
                            that.ShareUserListData.total=res.data.msg.total
                            // that.$alert('查询成功')
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //分摊到指定人
            averageSelect: function (row) {
//                var str = this.multipleSelection.join(',')
                var that = this;
                var str = that.selsettotalarr
                var data = {
                    event_id: that.ShareUserListData.event_id, //是	int	会议id
                    type: that.ShareUserListData.type, //是	int	1直采酒店 2旅行社
                    goods_id: that.ShareUserListData.goods_id, //是	int	主列表页goods_id
                    project_type: that.ShareUserListData.project_type, //是	int	{{trans('meeting.xmlb')}}
                    id: that.share_id, //是	int	列表页数据id
                    vender_id: that.share_vender_id, //是	int	列表页的vender_id
                    attendee_ids: str, //是	str	参会人id，多个逗号拼接
                    total_price: that.total_price, //是	str	该项的实际总金额
                }

                if(data.attendee_ids.length==0){
                    that.$alert('{{trans('meeting.xzchr')}}','{{trans('meeting.xxts')}}',{
                        confirmButtonText: '{{trans('meeting.queding')}}',
                        callback:function(action){

                    }
                })
                    return
                }




                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/averageSelect', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.shareCenter = '0'
                            that.ShareUserList = []
                            that.$alert('分摊成功')
                            that.dialogVisible_shareCenter=false
                            that.getEventTotalSettlementStatus()
                            that.tlist(that.type)
//                            that.reload_fn()
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert(response.data.msg,'{{trans('meeting.xxts')}}',{
                                confirmButtonText: '{{trans('meeting.queding')}}',
                                callback:function(action){

                            }
                        })
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        {{--that.$alert('{{trans('meeting.sjqqsb')}}');--}}
                    });
            },
            //
            centerhandleSelectionChange: function (val) {
                var that = this
                var data = val;
                var num = that.ShareUserListData.page-1

                that.selsettotalarr[num]=[]

//                var arr = [];
                data.forEach(function (item, index) {
                    that.selsettotalarr[num].push(item.attendee_id)
//                    arr.push(item.attendee_id)
                })
//                this.multipleSelection = arr
            },
            //分摊到所有人
            averageAll: function (row) {
                var that = this;
                that.shareCenter = '3'
                var data = that.averageAllData;
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/averageAll', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('分摊成功')
                            that.dialogVisible_shareCenter=false
                            that.getEventTotalSettlementStatus()
                            that.tlist(that.type)
//                            that.reload_fn()
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //分摊中心
            costCenter: function (row) {
                var that = this;
                that.shareCenter = '1'
                var data = that.costCenterData;
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/costCenter', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('分摊成功')
//                            that.reload_fn()
                            that.dialogVisible_shareCenter=false
                            that.getEventTotalSettlementStatus()
                            that.tlist(that.type)
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //差价原因
            difference_FN: function (row) {
                var order = row.order_sub_total*1 //合同
                if(isNaN(order)){
                    var order = row.order_sub_total.split(',').join("")*1
                }
                var real = row.real_sub_total*1; //实际
                if(isNaN(real)){
                    var real = row.real_sub_total.split(',').join("")*1;
                }
                var flag = Math.abs(real - order) >= 5000 || Math.abs((real - order) / order) >= 0.1;


                return flag
            },
            //弹出差价原因事件
            focus_difference_FN: function (row) {
                this.targetscope=row
                this.total_remark = row.total_remark
                this.dialogVisible_difference = true //查看差异
            },
            //判断明细表
            open_detail_table: function (row) {
                if(this.type==1){
                    switch (row.project_type) {
                        //实际住宿费用明细 2
                        case '3':
                            this.dialogVisible_real = true;
                            this.search_hotel_data.goods_id = row.goods_id;
                            this.stayDetailed()
                            break;
                        case '4':
                            this.dialogVisible_food = true;
                            this.search_food_head_data.event_id = row.event_id;
                            this.search_food_head_data.type = row.event_id;
                            this.search_food_head_data.vender_id = row.vender_id;
                            this.search_food_head_data.am_pm = row.type_three
                            this.search_food_head_data.goods_id = row.goods_id
                            this.resDetailed();
                            break;
                        default:
                            break;
                    }

                }else if(this.type==2){

                    switch (row.project_type) {
                        //实际住宿费用明细 2
                        case '1':
                            this.dialogVisible_real = true;
                            this.search_hotel_data.goods_id = row.goods_id;
                            this.stayDetailed()
                            break;
//                    case '3':
//                        this.dialogVisible_real = true;
//                        this.search_hotel_data.goods_id = row.goods_id;
//                        this.stayDetailed()
//                        break;
                        //实际餐饮用明细4
                        case '4':
                            this.dialogVisible_food = true;
                            this.search_food_head_data.event_id = row.event_id;
                            this.search_food_head_data.type = row.event_id;
                            this.search_food_head_data.vender_id = row.vender_id;
                            this.search_food_head_data.am_pm = row.type_three
                            this.search_food_head_data.goods_id = row.goods_id
                            this.resDetailed();
                            break;
                        case '9':
                            this.dialogVisible_food = true;
                            this.search_food_head_data.event_id = row.event_id;
                            this.search_food_head_data.type = row.event_id;
                            this.search_food_head_data.vender_id = row.vender_id;
                            this.search_food_head_data.am_pm = row.type_three
                            this.search_food_head_data.goods_id = row.goods_id
                            this.resDetailed();
                            break;
                        //地面交通5
                        case '5':
                            this.dialogVisible_traffic = true;
                            this.search_traffic_data.goods_id = row.goods_id;
                            this.trafficDetail();
                            break;
                        case '6':
                            this.dialogVisible_traffic = true;
                            this.search_traffic_data.goods_id = row.goods_id;
                            this.trafficDetail();
                            break;
                        case '7':
                            this.dialogVisible_traffic = true;
                            this.search_traffic_data.goods_id = row.goods_id;
                            this.trafficDetail();
                            break;
                        case '8':
                            this.dialogVisible_traffic = true;
                            this.search_traffic_data.goods_id = row.goods_id;
                            this.trafficDetail();
                            break;
                        //注册明细7
                        case '13':
                            this.dialogVisible_registered = true;
                            this.search_registered_data.event_id = row.event_id;
                            this.search_registered_data.type = row.type;
                            this.search_registered_data.project_type = row.project_type;
                            this.search_registered_data.real_unti_price = row.real_unti_price;
                            this.creditDetail();
                            break;
                        //实际签证费用明细 8
                        case '11':
                            this.dialogVisible_real_visa = true;
                            this.search_visa_data.event_id = row.event_id;
                            this.search_visa_data.type = row.type;
                            this.search_visa_data.project_type = row.project_type;
                            this.visaList()
                            break;
                        //保险明细9
                        case '10':
                            this.dialogVisible_insurance = true;
                            this.search_insurance_data.event_id = row.event_id;
                            this.search_insurance_data.type = row.type;
                            this.search_insurance_data.project_type = row.project_type;
                            this.search_insurance_data.real_unti_price = row.real_unti_price;
                            this.safeDetail()
                            break;
                        default:
                            break;
                    }

                }


            },
            //权限
            is_identity: function (TA) {
                var that = this;
                if (that.role_id == 9) { //ta
                    // if (9 == 9) {
                    this.hotel_bt = false;
                    this.share_bt = false;
                    this.air_bt = false;
                    this.identity=1

                    this.invoice_bt = true;

                    if (that.getEventTotalSettlementStatusData.ta_check == '1') {
                        that.total_bt = false;
                        this.permissions = true;
                    }
                } else if (that.role_id == 2) { //em
                    if (that.getEventTotalSettlementStatusData.em_check == '1') {
                        that.total_bt = false;
                        that.send_bt = true;
                        this.permissions = true;
                        this.identity=2
                        if (that.is_send_eo == '1') {
                            that.send_bt_flg = true
                        }
                    }
                } else if (that.role_id == 5) { //eo
                    // if(5== 5){ 
                    this.permissions = true;
                    this.detail_bt = false
                    this.identity=3
                    if (that.getEventTotalSettlementStatusData.eo_check == '1') {
                        that.total_bt = false;
                        this.permissions = true;
                    }
                }
            },
            //发送eo确认
            sendToEoConfirm: function () {
                var that = this;

                var data = {
                    event_id: that.event_id, //是	int	会议id
                };
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/sendToEoConfirm', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.a10013')}}', '{{trans('meeting.xxts')}}', {
                                confirmButtonText: '{{trans('meeting.queding')}}',
                                callback: function (action) {
                                that.dialogVisible_insertTaxNum = false;
                                that.send_bt_flg = true;
                                that.reload_fn()
                            }
                        });

                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert(res.data.msg)
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //获取总报价状态
            getEventTotalSettlementStatus: function (row) {
                var that = this;
                var data = {
                    event_id: that.event_id,
                };
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/getEventTotalSettlementStatus', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.getEventTotalSettlementStatusData = res.data.msg;
                            that.is_identity()

                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //确认总报价
            totalConfirm: function () {
                var that = this;
                var data = {
                    event_id: that.event_id, //是	int	会议id
                    identity: that.identity, //身份 1TA 2EM 3EO
                    vender_id: that.vender_id
                };
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/totalConfirm', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.tjcg')}}', '{{trans('meeting.xxts')}}', {
                                confirmButtonText: '{{trans('meeting.queding')}}',
                                callback: function (action) {
                                that.getEventTotalSettlementStatus()
                                that.tlist(that.type)
                            }
                        });
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert(res.data.msg)
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //TA总结算输入发票号码
            insertTaxNum: function () {
                var that = this;
                if (that.service_name == "" && that.invoice_number == '') {
                    that.$alert('{{trans('meeting.a10017')}}!');
                    return false;
                }

                var data = {
                    event_id: that.event_id, //是	int	会议id
                    service_name: that.service_name, //是	str	服务商名称
                    invoice_number: that.invoice_number, //是	str	终端发票号
                };
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/insertTaxNum', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            // that.$alert('上传成功')
                            that.dialogVisible_insertTaxNum = false;
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.shangchuanshibai')}}')
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            //机票列表
            air_fare: function () {
                var that = this;
                that.sumradio='3'
                that.show_hotel = false;
                that.airData.event_id = that.event_id;
                var data = that.airData;

                that.fullscreenLoading = true //laoding层控制
                axios.post('/logisticsticket/air_fare', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            if(res.data.msg=='empty'){
                                that.airList = []
                            }else{
                                that.airList = res.data.msg
                            }
                        } else {
                            that.fullscreenLoading = false //laoding层控制
//                            that.$alert(res.data.msg)
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },

            //修改酒店自定，其他，印刷单价和数量
            upPriceOrNum: function (row, up_type) {

                if (this.isNumber(row.real_unti_price) && this.isNumber(row.real_num)) {

                    var total = row.real_unti_price * row.real_num

                } else {
                    this.$alert('{{trans('meeting.a10321')}}')
                    return
                }
                var that = this;
                var data = {
                    id: row.id, //是	int	列表页的id
                    project_type: row.project_type, //是	int	列表页的project_type
                    up_type: up_type, //是	int	1是修改单价 2是修改数量
                    real_sub_total: total, //是	int	最新数量*最新单价
                    real_unti_price: row.real_unti_price, //否	str	要修改的实际单价 up_type=1时必填
                    real_num: row.real_num, //否	str	要修改的实际数量 up_type=2时必填
                };
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/upPriceOrNum', data)
                    .then(function (res) {
                        if (res.data.code == 1) {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.xgcg')}}','{{trans('meeting.xxts')}}',{
                                confirmButtonText: '{{trans('meeting.queding')}}',
                                callback:function(action){
                                location.reload()
                            }
                        })

                        } else {
                            that.fullscreenLoading = false //laoding层控制
                            that.$alert('{{trans('meeting.a10322')}}')
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                        that.$alert('{{trans('meeting.sjqqsb')}}');
                    });
            },
            isNumber: function (val) {
                var regPos = /^\d+(\.\d+)?$/; //非负浮点数
                // var regNeg = /^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/; //负浮点数
                // if(regPos.test(val) || regNeg.test(val)){
                if (regPos.test(val * 1)) {
                    return true;
                } else {
                    return false;
                }

            },

            //url 参数获取
            getQueryString: function (name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
                var r = window.location.search.substr(1).match(reg);
                if (r != null) return unescape(r[2]);
                return null;
            },
            getuserinfo: function () {
                var that = this;
                axios.post('/login/getUserInfo')
                    .then(function (response) {
                        if (response.data.code == "1") {
                            that.role_id = response.data.msg.role_id
                            that.getEventTotalSettlementStatus()

                        } else {
                        }
                    })
                    .catch(function (error) {});
            },
            //上传--保存入库
            StoreSupportFile: function () {
                var that = this;
                that.upload_data.event_id = that.event_id; //是	int	会议id
                that.upload_data.vender_id = that.vender_id; //是	int	直采酒店id或者旅行社id
                that.upload_data.type = that.type; //是	int	1直采酒店 2旅行社
                var data = that.upload_data;
                that.isreturn=true

                data.data.forEach(function (item,index) {
                    if(!item.url){
                        that.isreturn=false
                    }
                    if(!item.project_type){
                        that.isreturn=false
                    }

                })
                if(!that.isreturn){
                    that.$alert('{{trans('meeting.a10162')}}','{{trans('meeting.xxts')}}',{
                        confirmButtonText: '{{trans('meeting.queding')}}',
                        callback:function(action){

                    }
                })
                    return
                }

                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/StoreSupportFile', data)
                    .then(function (response) {
                        if (response.data.code == "1") {
                            that.$alert('{{trans('meeting.a10039')}}', '{{trans('meeting.xxts')}}', {
                                confirmButtonText: '{{trans('meeting.queding')}}',
                                callback: function () {
                                that.dialogVisible_upload = false;
                                that.fullscreenLoading = false //laoding层控制
                            }
                        })
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                    });
            },
            //上传--异步上传支持文件
            totalUpFile: function () {
                var that = this;
                that.fullscreenLoading = true //laoding层控制
                axios.post(' /total/totalUpFile', data)
                    .then(function (response) {
                        if (response.data.code == "1") {
                            that.role_id = response.data.msg.role_id
                            that.fullscreenLoading = false //laoding层控制
                            that.getEventTotalSettlementStatus()
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                    });
            },
            //上传--获取已经上传的文件数据
            getHasUpFiles: function () {
                var that = this;
                var data = {
                    event_id: that.event_id, //是	int	会议id
                    vender_id: that.vender_id, //是	int	直采酒店id或者旅行社id
                    type: that.type, //是	int	1直采酒店 2旅行社
                    surface_type:2
                };
                that.fullscreenLoading = true //laoding层控制
                axios.post('/total/getHasUpFiles', data)
                    .then(function (response) {
                        if (response.data.code == "1") {

//                            that.upload_data.data.splice(0, 1);
//                            console.log(that.upload_data.data)
//                            that.upload_data.data.forEach(function (item,index) {
//                                if(!item.url){
//                                    that.upload_data.data.splice(index, 1);
//                                }
//                            })
                            that.upload_data.data=[]




                            response.data.data.forEach(function (item) {
                                that.upload_data.data.push({
                                    url: item.file_path,
                                    name: item.file_name,
                                    project_type: item.project_type
                                })
                            });
                            that.fullscreenLoading = false //laoding层控制
                        } else {
                            that.fullscreenLoading = false //laoding层控制
                        }
                    })
                    .catch(function (error) {
                        that.fullscreenLoading = false //laoding层控制
                    });
            },
            //点击上传按钮事件
            upload_FN: function () {
                var that = this;
                that.dialogVisible_upload = true;
                that.getHasUpFiles();
            },
            //上传成功后的时间
            upload_success: function (response, file, fileList) {
                var that = this;
                this.$alert('{{trans('meeting.a10038')}}', '{{trans('meeting.a10024')}}', {
                    confirmButtonText: '{{trans('meeting.queding')}}',
                    callback: function () {
                    if (response.code == "1") {

                        that.upload_data.data.splice(that.upload_index, 1, {
                            url: response.data.url,
                            name: response.data.name,
                            project_type: that.upload_type
                        });
                    }
                }
            })

            },
            chose_upload_type: function (type, index) {
                this.upload_type = type;
                this.upload_index = index;
            },
            add_upload: function () {
                this.upload_data.data.push({
                    url: '',
                    name: '',
                    project_type: ''
                })
            },
            remove_upload: function (row) {

                var index = this.upload_data.data.indexOf(row)
                if (index !== -1) {
                    this.upload_data.data.splice(index, 1)
                }
//                if(this.upload_data.data.length==0){
//                    this.upload_data.data=[{
//                        url: '',
//                        name: '',
//                        project_type: '',
//                    }, ]
//                }
            },
            // preview_FN: function (file) {
            //     window.open(file.url, "_blank");
            // }




        },

    })
</script>

@endsection